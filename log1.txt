

(testEnv) C:\Users\111440\.conan\data\SpitfireAudioAutomation\1.55.0+g5ad8c80\BoseCorp\master\package\e9bb71937fb4875c30d10d7fea5cf87319876349\Tests>python -m pytest --config=my_smalls_config.json -sv test_a2dp_play.py -k test_a2dp_audio_play --local_proto_cache=..\python_api
[I Jul-20 15:01:20.811 bmap_plugin:72] bmap_version=None, bmap_build=None, bmap_branch=None
C:\Users\111440\SpitfireWorkspace\testEnv\lib\site-packages\jsonschema\validators.py:928: DeprecationWarning: The metaschema specified by $schema was not found. Using the latest draft to validate, but this will raise an error in the future.
  cls = validator_for(schema)
[I 2022-07-20 15:01:20,936 conftest:0147] [:(] Getting adb communication object for ba8bcc5
[D 2022-07-20 15:01:22,976 rivieraCommunication:0204] [:(] setCommunicationDetail
[D 2022-07-20 15:01:22,976 rivieraCommunication:0206] [:(] Adb get devices
[D 2022-07-20 15:01:23,036 rivieraCommunication:0211] [:(] Adb set target device
[D 2022-07-20 15:01:23,036 rivieraCommunication:0214] [:(] Adb check target device is set
[D 2022-07-20 15:01:23,106 rivieraCommunication:0330] [:(] Device found : ba8bcc5
[I 2022-07-20 15:01:23,106 rivieraCommunication:0223] [:(] Connected to device: ba8bcc5
[I 2022-07-20 15:01:23,110 conftest:0150] [:(] Done getting adb communication object for ba8bcc5
[I 2022-07-20 15:01:23,110 rivieraCommunication:0435] [:(] Get IP address with ADB connection
[I 2022-07-20 15:01:23,110 rivieraCommunication:0467] [:(] Get available network interfaces with ADB shell
[D 2022-07-20 15:01:23,110 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig | sed 's/[     ].*//;/^$/d'
[D 2022-07-20 15:01:23,156 rivieraCommunication:0470] [:(] Available Network Interfaces: '['lo', 'wlan0']'
[D 2022-07-20 15:01:23,156 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig wlan0 | grep 'inet addr:' | awk -F' ' '{print $2}' | awk -F':' '{print $2}'
[I 2022-07-20 15:01:23,236 conftest:0147] [:(] Getting adb communication object for ba8bcc5
[D 2022-07-20 15:01:25,279 rivieraCommunication:0204] [:(] setCommunicationDetail
[D 2022-07-20 15:01:25,279 rivieraCommunication:0206] [:(] Adb get devices
[D 2022-07-20 15:01:25,310 rivieraCommunication:0211] [:(] Adb set target device
[D 2022-07-20 15:01:25,310 rivieraCommunication:0214] [:(] Adb check target device is set
[D 2022-07-20 15:01:25,388 rivieraCommunication:0330] [:(] Device found : ba8bcc5
[I 2022-07-20 15:01:25,388 rivieraCommunication:0223] [:(] Connected to device: ba8bcc5
[I 2022-07-20 15:01:25,388 conftest:0150] [:(] Done getting adb communication object for ba8bcc5
[I 2022-07-20 15:01:25,388 conftest:0787] [:(] Try to disable InActivityTimer for device: ba8bcc5
[D 2022-07-20 15:01:25,388 rivieraUtils:0104] [:(] Initialize connection with ADB
[D 2022-07-20 15:01:27,451 rivieraCommunication:0204] [:(] setCommunicationDetail
[D 2022-07-20 15:01:27,451 rivieraCommunication:0206] [:(] Adb get devices
[D 2022-07-20 15:01:27,513 rivieraCommunication:0211] [:(] Adb set target device
[D 2022-07-20 15:01:27,513 rivieraCommunication:0214] [:(] Adb check target device is set
[D 2022-07-20 15:01:27,575 rivieraCommunication:0330] [:(] Device found : ba8bcc5
[I 2022-07-20 15:01:27,575 rivieraCommunication:0223] [:(] Connected to device: ba8bcc5
[D 2022-07-20 15:01:27,575 rivieraCommunication:0301] [:(] Executing ADB shell(device): cat /sys/devices/soc0/machine
[I 2022-07-20 15:01:27,638 rivieraUtils:1662] [:(] disable_no_audio_and_network_inactive_timeout
[D 2022-07-20 15:01:27,638 rivieraCommunication:0301] [:(] Executing ADB shell(device): grep -ie '\"NoAudioTimeout\":\s*0' /opt/Bose/etc/InActivityTimer.json
[I 2022-07-20 15:01:27,685 rivieraUtils:1617] [:(] Updating NoAudioTimeout to 0 in /opt/Bose/etc/InActivityTimer.json
[D 2022-07-20 15:01:27,685 rivieraCommunication:0301] [:(] Executing ADB shell(device): cat /opt/Bose/etc/InActivityTimer.json
[I 2022-07-20 15:01:27,763 rivieraUtils:1642] [:(] NoAudioTimeout is already 0!
[D 2022-07-20 15:01:27,763 rivieraCommunication:0301] [:(] Executing ADB shell(device): grep -ie '\"NoNetworkConfiguredTimeout\":\s*0' /opt/Bose/etc/InActivityTimer.json
[I 2022-07-20 15:01:27,825 rivieraUtils:1617] [:(] Updating NoNetworkConfiguredTimeout to 0 in /opt/Bose/etc/InActivityTimer.json
[D 2022-07-20 15:01:27,825 rivieraCommunication:0301] [:(] Executing ADB shell(device): cat /opt/Bose/etc/InActivityTimer.json
[I 2022-07-20 15:01:27,872 rivieraUtils:1642] [:(] NoNetworkConfiguredTimeout is already 0!
[I 2022-07-20 15:01:27,872 rivieraUtils:1733] [:(] Removing localHost from services.json
[D 2022-07-20 15:01:27,872 rivieraCommunication:0301] [:(] Executing ADB shell(device): grep localhost /opt/Bose/etc/services.json
[D 2022-07-20 15:01:27,966 rivieraCommunication:0301] [:(] Executing ADB shell(device): grep stream:APServer /opt/Bose/etc/services.json
[I 2022-07-20 15:01:28,013 rivieraUtils:1746] [:(] Dont need to remove localhost from services.json
[D 2022-07-20 15:01:28,013 rivieraUtils:1786] [:(] Disabling frontdoor JWT and Policy check
[D 2022-07-20 15:01:28,013 rivieraCommunication:0301] [:(] Executing ADB shell(device): grep -ie '\"disableJWT\":\s*True' /opt/Bose/etc/FrontDoorWSSCfg.json
[I 2022-07-20 15:01:28,060 rivieraUtils:1617] [:(] Updating disableJWT to True in /opt/Bose/etc/FrontDoorWSSCfg.json
[D 2022-07-20 15:01:28,060 rivieraCommunication:0301] [:(] Executing ADB shell(device): cat /opt/Bose/etc/FrontDoorWSSCfg.json
[I 2022-07-20 15:01:28,106 rivieraUtils:1642] [:(] disableJWT is already True!
[D 2022-07-20 15:01:28,106 rivieraCommunication:0301] [:(] Executing ADB shell(device): grep -ie '\"disablePolicyCheck\":\s*True' /opt/Bose/etc/FrontDoorWSSCfg.json
[I 2022-07-20 15:01:28,153 rivieraUtils:1617] [:(] Updating disablePolicyCheck to True in /opt/Bose/etc/FrontDoorWSSCfg.json
[D 2022-07-20 15:01:28,153 rivieraCommunication:0301] [:(] Executing ADB shell(device): cat /opt/Bose/etc/FrontDoorWSSCfg.json
[I 2022-07-20 15:01:28,231 rivieraUtils:1642] [:(] disablePolicyCheck is already True!
[D 2022-07-20 15:01:28,231 rivieraCommunication:0301] [:(] Executing ADB shell(device): grep -ie '\"disableWSSProductToProduct\":\s*True' /opt/Bose/etc/FrontDoorWSSCfg.json
[I 2022-07-20 15:01:28,278 rivieraUtils:1617] [:(] Updating disableWSSProductToProduct to True in /opt/Bose/etc/FrontDoorWSSCfg.json
[D 2022-07-20 15:01:28,278 rivieraCommunication:0301] [:(] Executing ADB shell(device): cat /opt/Bose/etc/FrontDoorWSSCfg.json
[I 2022-07-20 15:01:28,325 rivieraUtils:1642] [:(] disableWSSProductToProduct is already True!
[D 2022-07-20 15:01:28,325 rivieraCommunication:0301] [:(] Executing ADB shell(device): grep -ie '\"disableJWTProductToProduct\":\s*True' /opt/Bose/etc/FrontDoorWSSCfg.json
[I 2022-07-20 15:01:28,388 rivieraUtils:1617] [:(] Updating disableJWTProductToProduct to True in /opt/Bose/etc/FrontDoorWSSCfg.json
[D 2022-07-20 15:01:28,388 rivieraCommunication:0301] [:(] Executing ADB shell(device): cat /opt/Bose/etc/FrontDoorWSSCfg.json
[I 2022-07-20 15:01:28,450 rivieraUtils:1642] [:(] disableJWTProductToProduct is already True!
[D 2022-07-20 15:01:28,450 rivieraCommunication:0301] [:(] Executing ADB shell(device): sync
[D 2022-07-20 15:01:28,513 conftest:0796] [:(] Enable the HFP configuration
[D 2022-07-20 15:01:28,513 rivieraUtils:1987] [:(] Enable the HFAG profile
[D 2022-07-20 15:01:28,513 rivieraUtils:1976] [:(] check HFAG profile status
[D 2022-07-20 15:01:28,528 rivieraCommunication:0301] [:(] Executing ADB shell(device): cat /opt/Bose/etc/BTConfig.xml
[I 2022-07-20 15:01:28,575 rivieraUtils:2001] [:(] HFAG profile already enabled
[I 2022-07-20 15:01:28,575 conftest:0811] [:(]  For loop_count 5
[I 2022-07-20 15:01:28,575 conftest:0814] [:(]  Capture duration None
[I 2022-07-20 15:01:28,591 conftest:0817] [:(]  Selected AAC Codec False
[I 2022-07-20 15:01:28,591 conftest:0829] [:(]  Test Run Type 0
=========================================================================================================== test session starts ============================================================================================================
platform win32 -- Python 3.8.0, pytest-6.2.1, py-1.11.0, pluggy-0.13.1 -- C:\Users\111440\SpitfireWorkspace\testEnv\Scripts\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.8.0', 'Platform': 'Windows-10-10.0.19041-SP0', 'Packages': {'pytest': '6.2.1', 'py': '1.11.0', 'pluggy': '0.13.1'}, 'Plugins': {'base-url': '2.0.0', 'cov': '2.8.1', 'dependency': '0.5.1', 'flask': '1.0.0', 'html': '3.1.1', 'metadata': '2.0.2', 'pythonpath': '0.7.3', 'repeat': '0.8.0', 'selenium': '1.17.0', 'testrail': '2.8.3', 'variables': '2.0.0', 'WearableTestUtils': '12.6.1'}, 'Base URL': '', 'Driver': None, 'Capabilities': {}}
sensitiveurl: .*
rootdir: C:\Users\111440\.conan\data\SpitfireAudioAutomation\1.55.0+g5ad8c80\BoseCorp\master\package\e9bb71937fb4875c30d10d7fea5cf87319876349\Tests, configfile: pytest.ini
plugins: base-url-2.0.0, cov-2.8.1, dependency-0.5.1, flask-1.0.0, html-3.1.1, metadata-2.0.2, pythonpath-0.7.3, repeat-0.8.0, selenium-1.17.0, testrail-2.8.3, variables-2.0.0, WearableTestUtils-12.6.1
collected 30 items / 28 deselected / 2 selected

test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav-44100] [D 2022-07-20 15:01:29,668 conftest:0439] [:(] SpitfireProtoManager
[I Jul-20 15:01:29.668 PbManager:374] Loading proto 'anr_assert'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'anr_cbm'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'anr_hxm'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'anr_hxs'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'API_audio'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'API_mpl'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'API_tel'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'audio_bdsp'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'audio_common_enums'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'audio_latency'
[I Jul-20 15:01:29.684 PbManager:374] Loading proto 'audio_mic_routing'
[I Jul-20 15:01:29.700 PbManager:374] Loading proto 'audio_mic_trim'
[I Jul-20 15:01:29.700 PbManager:374] Loading proto 'audio_output_manager'
[I Jul-20 15:01:29.700 PbManager:374] Loading proto 'audio_prompt_language'
[I Jul-20 15:01:29.715 PbManager:374] Loading proto 'audio_single_bud_mode'
[I Jul-20 15:01:29.715 PbManager:374] Loading proto 'audio_stream_status'
[I Jul-20 15:01:29.715 PbManager:374] Loading proto 'audio_tones_prompts'
[I Jul-20 15:01:29.715 PbManager:374] Loading proto 'audio_user_eq_control'
[I Jul-20 15:01:29.731 PbManager:374] Loading proto 'audio_volume_control'
[I Jul-20 15:01:29.731 PbManager:374] Loading proto 'aud_music'
[I Jul-20 15:01:29.731 PbManager:374] Loading proto 'aud_prompt'
[I Jul-20 15:01:29.747 PbManager:374] Loading proto 'aud_tone'
[I Jul-20 15:01:29.747 PbManager:374] Loading proto 'aud_voice'
[I Jul-20 15:01:29.747 PbManager:374] Loading proto 'battery_manager_api'
[I Jul-20 15:01:29.762 PbManager:374] Loading proto 'battery_manager'
[I Jul-20 15:01:29.762 PbManager:374] Loading proto 'bluetooth_api'
[I Jul-20 15:01:29.762 PbManager:374] Loading proto 'clh_spitfire'
[I Jul-20 15:01:29.778 PbManager:374] Loading proto 'component_state'
[I Jul-20 15:01:29.778 PbManager:374] Loading proto 'core_address'
[I Jul-20 15:01:29.778 PbManager:374] Loading proto 'core_api'
[I Jul-20 15:01:29.778 PbManager:374] Loading proto 'core_handover'
[I Jul-20 15:01:29.793 PbManager:374] Loading proto 'core_msg_header'
[I Jul-20 15:01:29.793 PbManager:374] Loading proto 'dc_counter'
[I Jul-20 15:01:29.793 PbManager:374] Loading proto 'dc_ets'
[I Jul-20 15:01:29.809 PbManager:374] Loading proto 'mpl_controls'
[I Jul-20 15:01:29.809 PbManager:374] Loading proto 'mpl_nowplaying_status'
[I Jul-20 15:01:29.809 PbManager:374] Loading proto 'mpl_stream_status'
[I Jul-20 15:01:29.809 PbManager:374] Loading proto 'nanopb'
[I Jul-20 15:01:29.809 PbManager:374] Loading proto 'power_manager'
[I Jul-20 15:01:29.825 PbManager:374] Loading proto 'smartanr_api'
[I Jul-20 15:01:29.825 PbManager:374] Loading proto 'tco_hello'
[I Jul-20 15:01:29.840 PbManager:374] Loading proto 'tel_call_event'
[I Jul-20 15:01:29.840 PbManager:374] Loading proto 'tel_connection_status'
[I Jul-20 15:01:29.840 PbManager:374] Loading proto 'tel_controls'
[I Jul-20 15:01:29.840 PbManager:374] Loading proto 'tel_vpa_event'
[W Jul-20 15:01:29.840 PbManager:396] No entry for proto `anr_assert` found in loaded metadata
[W Jul-20 15:01:29.840 PbManager:396] No entry for proto `anr_cbm` found in loaded metadata
[W Jul-20 15:01:29.840 PbManager:396] No entry for proto `anr_hxm` found in loaded metadata
[W Jul-20 15:01:29.840 PbManager:396] No entry for proto `anr_hxs` found in loaded metadata
[W Jul-20 15:01:29.840 PbManager:396] No entry for proto `aud_music` found in loaded metadata
[W Jul-20 15:01:29.840 PbManager:396] No entry for proto `aud_prompt` found in loaded metadata
[W Jul-20 15:01:29.840 PbManager:396] No entry for proto `aud_tone` found in loaded metadata
[W Jul-20 15:01:29.856 PbManager:396] No entry for proto `aud_voice` found in loaded metadata
[W Jul-20 15:01:29.856 PbManager:396] No entry for proto `clh_spitfire` found in loaded metadata
[W Jul-20 15:01:29.856 PbManager:396] No entry for proto `component_state` found in loaded metadata
[W Jul-20 15:01:29.856 PbManager:396] No entry for proto `core_handover` found in loaded metadata
[W Jul-20 15:01:29.856 PbManager:396] No entry for proto `dc_counter` found in loaded metadata
[W Jul-20 15:01:29.856 PbManager:396] No entry for proto `dc_ets` found in loaded metadata
[W Jul-20 15:01:29.856 PbManager:396] No entry for proto `nanopb` found in loaded metadata
[W Jul-20 15:01:29.856 PbManager:396] No entry for proto `tco_hello` found in loaded metadata
[I Jul-20 15:01:29.856 PbManager:410] Loaded 45 protobufs
[D 2022-07-20 15:01:29,872 conftest:0384] [:(] Invoking polycom Fixture
[D 2022-07-20 15:01:33,355 conftest:0413] [:(] Downloading BMAP from: http://hepdsw-web.bose.com/ec/prod/BMAP/Continuous/master/
[D 2022-07-20 15:01:35,698 conftest:0325] [:(] Invoking sink Fixture
[D 2022-07-20 15:01:35,698 conftest:0334] [:(] [<pypolycomm.hidpolycommdevice.HidPolyCommDevice object at 0x00000212899A19D0>, <pypolycomm.hidpolycommdevice.HidPolyCommDevice object at 0x00000212899B9D90>]
[D 2022-07-20 15:01:35,698 conftest:0337] [:(] Smalls [C1-Smalls-R]
[D 2022-07-20 15:01:35,698 conftest:0339] [:(] Filter based on serial number.
[D 2022-07-20 15:01:35,698 conftest:0337] [:(] Smalls [C1-Smalls-L]
[D 2022-07-20 15:01:35,714 conftest:0339] [:(] Filter based on serial number.
[I 2022-07-20 15:01:35,761 bt_spitfire_helper:0139] [:(] Right: __init__
[I 2022-07-20 15:01:35,761 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(aud): event_id: 0
[I 2022-07-20 15:01:35,761 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(aud): event_id: 1
[I 2022-07-20 15:01:35,761 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(aud): event_id: 3
[I 2022-07-20 15:01:35,776 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:35,855 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(mpl): event_id: 0
[I 2022-07-20 15:01:35,855 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(mpl): event_id: 1
[I 2022-07-20 15:01:35,855 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(mpl): event_id: 2
[I 2022-07-20 15:01:35,855 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(tel): event_id: 0
[I 2022-07-20 15:01:35,855 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(tel): event_id: 1
[I 2022-07-20 15:01:35,855 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(tel): event_id: 2
[I 2022-07-20 15:01:35,870 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(bt): event_id: 0
[I 2022-07-20 15:01:35,870 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(bt): event_id: 3
[I 2022-07-20 15:01:35,870 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(bt): event_id: 6
[I 2022-07-20 15:01:35,870 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(anr): event_id: 3
[I 2022-07-20 15:01:35,870 SpitfireComponentMessaging:0246] [:(] Right: _register_for_event(cor): event_id: 18
[I 2022-07-20 15:01:35,886 bt_spitfire_helper:0157] [:(] Right: Spitfire firmware version response: version: SpitfireCoreServices//58.2.2+gc4d4a4ee@BoseCorp/master:package_id_unknown Unknown.spitfire-pod-nszlz.2022-07-06T17:28:14
[I 2022-07-20 15:01:35,886 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:01:35,886 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:01:35,886 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:01:35,886 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:01:35.901 SpitfireMessaging:361] Sending request with transaction id 0 (0x0)
[D Jul-20 15:01:35.917 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:35,917 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 1
[I 2022-07-20 15:01:36,011 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 1
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:01:36,011 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:01:36,011 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[I 2022-07-20 15:01:36,011 bt_spitfire_group_helper:0036] [:(] This is right -> Smalls [C1-Smalls-R] MAC: 78:2b:64:7c:45:be  sinkRight: <bt_spitfire_helper.BTSpitfireHelper object at 0x00000212899A1220>
[I 2022-07-20 15:01:36,058 bt_spitfire_helper:0139] [:(] Left: __init__
[I 2022-07-20 15:01:36,058 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(aud): event_id: 0
[I 2022-07-20 15:01:36,073 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(aud): event_id: 1
[I 2022-07-20 15:01:36,073 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(aud): event_id: 3
[I 2022-07-20 15:01:36,073 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:36,073 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(mpl): event_id: 0
[I 2022-07-20 15:01:36,073 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(mpl): event_id: 1
[I 2022-07-20 15:01:36,073 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(mpl): event_id: 2
[I 2022-07-20 15:01:36,073 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(tel): event_id: 0
[I 2022-07-20 15:01:36,073 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(tel): event_id: 1
[I 2022-07-20 15:01:36,089 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(tel): event_id: 2
[I 2022-07-20 15:01:36,089 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(bt): event_id: 0
[I 2022-07-20 15:01:36,089 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(bt): event_id: 3
[I 2022-07-20 15:01:36,089 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(bt): event_id: 6
[I 2022-07-20 15:01:36,089 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(anr): event_id: 3
[I 2022-07-20 15:01:36,089 SpitfireComponentMessaging:0246] [:(] Left: _register_for_event(cor): event_id: 18
[I 2022-07-20 15:01:36,089 bt_spitfire_helper:0157] [:(] Left: Spitfire firmware version response: version: SpitfireCoreServices//58.2.2+gc4d4a4ee@BoseCorp/master:package_id_unknown Unknown.spitfire-pod-nszlz.2022-07-06T17:28:14
[I 2022-07-20 15:01:36,104 sink_group:0086] [:(] get_mac: LEFT
[I 2022-07-20 15:01:36,104 bt_spitfire_helper:0199] [:(] Left: get_mac
[I 2022-07-20 15:01:36,104 SpitfireBluetoothMessage:0256] [:(] Left: get_mac_based_on_role
[I 2022-07-20 15:01:36,104 SpitfireComponentMessaging:0210] [:(] Left: send_request(bt): message_id= 17
[D Jul-20 15:01:36.104 SpitfireMessaging:361] Sending request with transaction id 0 (0x0)
[D Jul-20 15:01:36.120 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:36,120 SpitfireComponentMessaging:0261] [:(] Left: wait_for_response(bt): message_id: 17 and request_id: 1
[I 2022-07-20 15:01:36,229 SpitfireComponentMessaging:0199] [:(] Left: Response(bt): message_id: 17, request_id: 1
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:01:36,229 SpitfireBluetoothMessage:0268] [:(] Left: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:01:36,229 bt_spitfire_helper:0202] [:(] Left: get_mac: 78:2b:64:7c:45:be
[I 2022-07-20 15:01:36,229 bt_spitfire_group_helper:0041] [:(] This is left -> Smalls [C1-Smalls-L] MAC: 78:2b:64:7c:45:be  sinkLeft: <bt_spitfire_helper.BTSpitfireHelper object at 0x00000212899B9670>
[D 2022-07-20 15:01:36,229 conftest:0374] [:(] Invoking audioPrepareOutput Fixture
[I 2022-07-20 15:01:36,245 sink_group:0086] [:(] send_audio_prepare_output_request: BOTH
[I 2022-07-20 15:01:36,245 SpitfireAudioMessage:0687] [:(] Right: send_audio_prepare_output_request for prepare: True chain: True hwPower: True, unlock: True
[I 2022-07-20 15:01:36,245 SpitfireComponentMessaging:0210] [:(] Right: send_request(aud): message_id= 35
[D Jul-20 15:01:36.245 SpitfireMessaging:361] Sending request with transaction id 1 (0x1)
[D Jul-20 15:01:36.261 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:36,261 SpitfireAudioMessage:0687] [:(] Left: send_audio_prepare_output_request for prepare: True chain: True hwPower: True, unlock: True
[I 2022-07-20 15:01:36,261 SpitfireComponentMessaging:0210] [:(] Left: send_request(aud): message_id= 35
[D Jul-20 15:01:36.261 SpitfireMessaging:361] Sending request with transaction id 1 (0x1)
[D Jul-20 15:01:36.276 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:36,276 sink_group:0086] [:(] check_audio_prepare_output_event: BOTH
[I 2022-07-20 15:01:36,276 SpitfireAudioMessage:0723] [:(] Right: check_audio_prepare_output_event: prepared: True, chain: True, hwPower: True, unlock: True, timeout_s: 10
[W 2022-07-20 15:01:36,292 api:0040] [:(] Right: Current Audio event prepared state False is not as expected True, retrying in 1 seconds...
[I 2022-07-20 15:01:36,620 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 3
[I 2022-07-20 15:01:36,620 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 3
 --- Data ---
state {
  chain: true
}

[I 2022-07-20 15:01:36,620 SpitfireAudioMessage:0054] [:(] Right: _monitor_audio_prepare_output_event: response: state {
  chain: true
}

[I 2022-07-20 15:01:36,620 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:36,636 SpitfireComponentMessaging:0199] [:(] Right: Response(aud): message_id: 35, request_id: 1
 --- payload---
success: true


[I 2022-07-20 15:01:36,652 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 3
[I 2022-07-20 15:01:36,652 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 3
 --- Data ---
state {
  chain: true
}

[I 2022-07-20 15:01:36,652 SpitfireAudioMessage:0054] [:(] Left: _monitor_audio_prepare_output_event: response: state {
  chain: true
}

[I 2022-07-20 15:01:36,652 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:36,667 SpitfireComponentMessaging:0199] [:(] Left: Response(aud): message_id: 35, request_id: 1
 --- payload---
success: true


[I 2022-07-20 15:01:36,667 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(anr): context= 3
[I 2022-07-20 15:01:36,667 SpitfireComponentMessaging:0082] [:(] Right: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_POWERING_ON

[I 2022-07-20 15:01:36,683 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(anr): context= 3
[I 2022-07-20 15:01:36,683 SpitfireComponentMessaging:0082] [:(] Left: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_POWERING_ON

[W 2022-07-20 15:01:37,292 api:0040] [:(] Right: Current Audio event prepared state False is not as expected True, retrying in 1 seconds...
[I 2022-07-20 15:01:37,386 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(anr): context= 3
[I 2022-07-20 15:01:37,386 SpitfireComponentMessaging:0082] [:(] Right: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_POWERING_ON

[I 2022-07-20 15:01:37,386 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(anr): context= 3
[I 2022-07-20 15:01:37,401 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(anr): context= 3
[I 2022-07-20 15:01:37,401 SpitfireComponentMessaging:0082] [:(] Right: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_ON

[I 2022-07-20 15:01:37,401 SpitfireComponentMessaging:0082] [:(] Left: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_POWERING_ON

[I 2022-07-20 15:01:37,401 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 3
[I 2022-07-20 15:01:37,401 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 3
 --- Data ---
state {
  chain: true
  hwPower: true
}

[I 2022-07-20 15:01:37,401 SpitfireAudioMessage:0054] [:(] Right: _monitor_audio_prepare_output_event: response: state {
  chain: true
  hwPower: true
}

[I 2022-07-20 15:01:37,401 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:37,417 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 3
[I 2022-07-20 15:01:37,417 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(anr): context= 3
[I 2022-07-20 15:01:37,417 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 3
 --- Data ---
prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:01:37,417 SpitfireComponentMessaging:0082] [:(] Left: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_ON

[I 2022-07-20 15:01:37,417 SpitfireAudioMessage:0054] [:(] Right: _monitor_audio_prepare_output_event: response: prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:01:37,417 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 3
[I 2022-07-20 15:01:37,417 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:37,417 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 3
 --- Data ---
state {
  chain: true
  hwPower: true
}

[I 2022-07-20 15:01:37,417 SpitfireAudioMessage:0054] [:(] Left: _monitor_audio_prepare_output_event: response: state {
  chain: true
  hwPower: true
}

[I 2022-07-20 15:01:37,417 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:37,432 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 3
[I 2022-07-20 15:01:37,432 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 3
 --- Data ---
prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:01:37,432 SpitfireAudioMessage:0054] [:(] Left: _monitor_audio_prepare_output_event: response: prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:01:37,432 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:38,307 SpitfireAudioMessage:0742] [:(] Right: Got expected Audio output event: prepared True, chain True, hwPower True, unlock True : prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:01:38,307 SpitfireAudioMessage:0723] [:(] Left: check_audio_prepare_output_event: prepared: True, chain: True, hwPower: True, unlock: True, timeout_s: 10
[I 2022-07-20 15:01:38,307 SpitfireAudioMessage:0742] [:(] Left: Got expected Audio output event: prepared True, chain True, hwPower True, unlock True : prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[D 2022-07-20 15:01:38,307 conftest:0642] [:(] Invoking adb Fixture
[I 2022-07-20 15:01:38,307 conftest:0147] [:(] Getting adb communication object for ba8bcc5
[W 2022-07-20 15:01:38,417 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:38,417 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:38,432 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:38,432 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:39,432 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:39,432 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:39,448 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:39,448 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:01:40,369 rivieraCommunication:0204] [:(] setCommunicationDetail
[D 2022-07-20 15:01:40,369 rivieraCommunication:0206] [:(] Adb get devices
[D 2022-07-20 15:01:40,432 rivieraCommunication:0211] [:(] Adb set target device
[D 2022-07-20 15:01:40,432 rivieraCommunication:0214] [:(] Adb check target device is set
[W 2022-07-20 15:01:40,447 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:40,447 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:40,463 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:40,463 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:01:40,525 rivieraCommunication:0330] [:(] Device found : ba8bcc5
[I 2022-07-20 15:01:40,525 rivieraCommunication:0223] [:(] Connected to device: ba8bcc5
[I 2022-07-20 15:01:40,525 conftest:0150] [:(] Done getting adb communication object for ba8bcc5
[D 2022-07-20 15:01:40,525 conftest:0705] [:(] Invoking frontdoor fixture
[I 2022-07-20 15:01:40,525 rivieraCommunication:0435] [:(] Get IP address with ADB connection
[I 2022-07-20 15:01:40,525 rivieraCommunication:0467] [:(] Get available network interfaces with ADB shell
[D 2022-07-20 15:01:40,525 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig | sed 's/[     ].*//;/^$/d'
[D 2022-07-20 15:01:40,588 rivieraCommunication:0470] [:(] Available Network Interfaces: '['eth0', 'lo', 'wlan0']'
[D 2022-07-20 15:01:40,588 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig eth0 | grep 'inet addr:' | awk -F' ' '{print $2}' | awk -F':' '{print $2}'
[D 2022-07-20 15:01:40,635 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig wlan0 | grep 'inet addr:' | awk -F' ' '{print $2}' | awk -F':' '{print $2}'
[I 2022-07-20 15:01:40,697 FrontDoorAPI:0063] [:(] The port currently in use is: 8082
[I 2022-07-20 15:01:40,697 FrontDoorAPI:0064] [:(] The IP address of the target is: 10.26.138.46
[D 2022-07-20 15:01:40,697 FrontDoorAPI:0174] [:(] Opening Web Socket connection to the device with IP: 10.26.138.46
[D 220720 15:01:40.697 Telnet:100] [:(] TELNET: Opening session
[I 220720 15:01:40.697 Telnet:59] [:(] TELNET: Connecting to host: 10.26.138.46, port: 23
[I 220720 15:01:40.791 Telnet:61] [:(] TELNET: Connection Established
[D 220720 15:01:40.791 Telnet:116] [:(] TELNET command: netstat -tlnp | grep 8082
[W 2022-07-20 15:01:41,463 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:41,463 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:41,478 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:41,478 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:42,478 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:42,478 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:42,494 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:42,494 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:43,493 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:43,493 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:43,509 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:43,509 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 220720 15:01:43.806 Telnet:208] [:(] TELNET: Closing session
[I 2022-07-20 15:01:43,806 FrontDoorAPI:0124] [:(] FrontDoor is starting to serve on port 8082
[I 2022-07-20 15:01:43,806 FrontDoorAPI:0180] [:(] The value of tflag: True
[I 2022-07-20 15:01:43,806 FrontDoorAPI:0185] [:(] The websocket url is: wss://10.26.138.46:8082/?product=EddieTest2022-07-20T15:01:40.697997
[D 2022-07-20 15:01:43,806 FrontDoorAPI:0211] [:(] Waiting for WebSocket connection to be established.
[D 2022-07-20 15:01:43,821 FrontDoorAPI:0217] [:(] Connecting to WebSocket Object: <websocket._core.WebSocket object at 0x000002128B808A60>
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0272] [:(] WebSocket Connection Open
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0232] [:(] Total time for connection to WebSocket: 0.484
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "FrontDoorVersionInfo": {
            "serverVersion": 2.0
        }
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "VersionInfo",
        "version": 2.0
    }
}
[I 2022-07-20 15:01:44,290 FrontDoorAPI:0233] [:(] Is the WebSocket connection established? True
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0355] [:(] Last Notification received:{
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/connectionReady",
        "version": 2.0
    }
}
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0355] [:(] Last Notification received:{
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "FrontDoorReady",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0376] [:(] Sending PUT to /subscription
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0379] [:(] Enveloping data: {"notifications": [{"resource": "/bluetooth/source/list", "version": 1}, {"resource": "/bluetooth/sink/list", "version": 1}, {"resource": "/bluetooth/sink/connectionStatus", "version": 1}, {"resource": "/bluetooth/sink/status", "version": 1}, {"resource": "/bluetooth/source/volume", "version": 1}, {"resource": "/bluetooth/source/pairStatus", "version": 1}, {"resource": "/bluetooth/source/connectionStatus", "version": 1}, {"resource": "/bluetooth/source/list", "version": 1}, {"resource": "/bluetooth/source/status", "version": 1}, {"resource": "/bluetooth/source/scanResult", "version": 1}, {"resource": "/bluetooth/source/scan", "version": 1}]}
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/subscription', 'version': 1, 'token': '12345', 'method': 'PUT', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 0}}
[D 2022-07-20 15:01:44,290 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{"notifications": [{"resource": "/bluetooth/source/list", "version": 1}, {"resource": "/bluetooth/sink/list", "version": 1}, {"resource": "/bluetooth/sink/connectionStatus", "version": 1}, {"resource": "/bluetooth/sink/status", "version": 1}, {"resource": "/bluetooth/source/volume", "version": 1}, {"resource": "/bluetooth/source/pairStatus", "version": 1}, {"resource": "/bluetooth/source/connectionStatus", "version": 1}, {"resource": "/bluetooth/source/list", "version": 1}, {"resource": "/bluetooth/source/status", "version": 1}, {"resource": "/bluetooth/source/scanResult", "version": 1}, {"resource": "/bluetooth/source/scan", "version": 1}]}
[D 2022-07-20 15:01:44,306 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "notifications": [
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/volume",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/pairStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scanResult",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scan",
                "version": 1
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "PUT",
        "msgtype": "REQUEST",
        "reqID": 0,
        "resource": "/subscription",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:44,306 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "notifications": [
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/volume",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/pairStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scanResult",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scan",
                "version": 1
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "PUT",
        "msgtype": "REQUEST",
        "reqID": 0,
        "resource": "/subscription",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:44,306 FrontDoorAPI:0392] [:(] Getting the response for: /subscription
[D 2022-07-20 15:01:44,353 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "notifications": [
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/sink/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/volume",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/pairStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scanResult",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scan",
                "version": 1
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "PUT",
        "msgtype": "RESPONSE",
        "reqID": 0,
        "resource": "/subscription",
        "status": 200,
        "version": 1.0
    }
}
[D 2022-07-20 15:01:44,353 conftest:0452] [:(] Invoking btNotification Fixture
[D 2022-07-20 15:01:44,353 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:01:44,353 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:01:44,353 FrontDoorAPI:0376] [:(] Sending PUT to /subscription
[D 2022-07-20 15:01:44,353 FrontDoorAPI:0379] [:(] Enveloping data: {"notifications": [{"resource": "/bluetooth/source/volume", "version": 1}, {"resource": "/bluetooth/source/pairStatus", "version": 1}, {"resource": "/bluetooth/source/connectionStatus", "version": 1}, {"resource": "/bluetooth/source/list", "version": 1}, {"resource": "/bluetooth/source/status", "version": 1}, {"resource": "/bluetooth/source/scanResult", "version": 1}, {"resource": "/bluetooth/source/scan", "version": 1}, {"resource": "/bluetooth/source/profileStatus", "version": 1}, {"resource": "/bluetooth/source/hfagAudioStatus", "version": 1}, {"resource": "/bluetooth/source/hfagVolume/mic", "version": 1}, {"resource": "/bluetooth/source/hfagVolume/speaker", "version": 1}, {"resource": "/bluetooth/aclConnectionStatus", "version": 1}, {"resource": "/bluetooth/source/hfagCallStatus", "version": 1}, {"resource": "/bluetooth/source/hfagBatteryLevelStatus", "version": 1}]}
[D 2022-07-20 15:01:44,353 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/subscription', 'version': 1, 'token': '12345', 'method': 'PUT', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 1}}
[D 2022-07-20 15:01:44,368 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{"notifications": [{"resource": "/bluetooth/source/volume", "version": 1}, {"resource": "/bluetooth/source/pairStatus", "version": 1}, {"resource": "/bluetooth/source/connectionStatus", "version": 1}, {"resource": "/bluetooth/source/list", "version": 1}, {"resource": "/bluetooth/source/status", "version": 1}, {"resource": "/bluetooth/source/scanResult", "version": 1}, {"resource": "/bluetooth/source/scan", "version": 1}, {"resource": "/bluetooth/source/profileStatus", "version": 1}, {"resource": "/bluetooth/source/hfagAudioStatus", "version": 1}, {"resource": "/bluetooth/source/hfagVolume/mic", "version": 1}, {"resource": "/bluetooth/source/hfagVolume/speaker", "version": 1}, {"resource": "/bluetooth/aclConnectionStatus", "version": 1}, {"resource": "/bluetooth/source/hfagCallStatus", "version": 1}, {"resource": "/bluetooth/source/hfagBatteryLevelStatus", "version": 1}]}
[D 2022-07-20 15:01:44,368 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "notifications": [
            {
                "resource": "/bluetooth/source/volume",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/pairStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scanResult",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scan",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/profileStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagAudioStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagVolume/mic",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagVolume/speaker",
                "version": 1
            },
            {
                "resource": "/bluetooth/aclConnectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagCallStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagBatteryLevelStatus",
                "version": 1
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "PUT",
        "msgtype": "REQUEST",
        "reqID": 1,
        "resource": "/subscription",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:44,384 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "notifications": [
            {
                "resource": "/bluetooth/source/volume",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/pairStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scanResult",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scan",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/profileStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagAudioStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagVolume/mic",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagVolume/speaker",
                "version": 1
            },
            {
                "resource": "/bluetooth/aclConnectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagCallStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagBatteryLevelStatus",
                "version": 1
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "PUT",
        "msgtype": "REQUEST",
        "reqID": 1,
        "resource": "/subscription",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:44,384 FrontDoorAPI:0392] [:(] Getting the response for: /subscription
[D 2022-07-20 15:01:44,431 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "notifications": [
            {
                "resource": "/bluetooth/source/volume",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/pairStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/connectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/list",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/status",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scanResult",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/scan",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/profileStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagAudioStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagVolume/mic",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagVolume/speaker",
                "version": 1
            },
            {
                "resource": "/bluetooth/aclConnectionStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagCallStatus",
                "version": 1
            },
            {
                "resource": "/bluetooth/source/hfagBatteryLevelStatus",
                "version": 1
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "PUT",
        "msgtype": "RESPONSE",
        "reqID": 1,
        "resource": "/subscription",
        "status": 200,
        "version": 1.0
    }
}
[I 2022-07-20 15:01:44,431 conftest:0847] [:(] Invoking local_ip fixture
[I 2022-07-20 15:01:44,431 conftest:0854] [:(] Using IP address: 10.26.138.25 from interface: {3B844409-929A-49E4-8C35-35A0BC10A3DC}
[I 2022-07-20 15:01:44,431 conftest:0663] [:(] --------------------------------------------
[I 2022-07-20 15:01:44,431 conftest:0664] [:(] function    : test_a2dp_audio_play
[I 2022-07-20 15:01:44,431 conftest:0665] [:(] test name   : test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav-44100]
[I 2022-07-20 15:01:44,431 conftest:0666] [:(] time        : Wed Jul 20 15:01:44 2022
[I 2022-07-20 15:01:44,431 conftest:0667] [:(] ----------------------------------------------
[D 2022-07-20 15:01:44,431 conftest:0465] [:(] Invoking logread fixture
[I 2022-07-20 15:01:44,431 conftest:0478] [:(] --- SKIPPING LOGREAD and LOGCAT ---
[I 2022-07-20 15:01:44,431 conftest:0101] [:(] Invoking skip_test_if_condition
[I 2022-07-20 15:01:44,431 conftest:0130] [:(] Invoking skip_test_if_condition :- optional_audio_capture
[I 2022-07-20 15:01:44,431 conftest:0280] [:(] Invoking apClientFixture fixture
[I 2022-07-20 15:01:44,431 rivieraCommunication:0435] [:(] Get IP address with ADB connection
[I 2022-07-20 15:01:44,431 rivieraCommunication:0467] [:(] Get available network interfaces with ADB shell
[D 2022-07-20 15:01:44,431 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig | sed 's/[     ].*//;/^$/d'
[D 2022-07-20 15:01:44,493 rivieraCommunication:0470] [:(] Available Network Interfaces: '['eth0', 'lo', 'wlan0']'
[D 2022-07-20 15:01:44,493 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig eth0 | grep 'inet addr:' | awk -F' ' '{print $2}' | awk -F':' '{print $2}'
[W 2022-07-20 15:01:44,509 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:44,509 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:44,524 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:44,524 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:01:44,540 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig wlan0 | grep 'inet addr:' | awk -F' ' '{print $2}' | awk -F':' '{print $2}'
[I 2022-07-20 15:01:44,618 conftest:0285] [:(] apClient is trying to connect with this ip 10.26.138.46
[I 2022-07-20 15:01:44,618 apTestClient:0074] [:(] Need to specify a variant in APTestConfig for each unit now; spotty, mojo, eddie, etc.
[W 2022-07-20 15:01:45,509 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:45,509 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:45,525 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:45,525 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:46,524 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:46,524 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:46,540 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:46,540 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:47,540 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:47,540 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:47,555 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:47,555 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:48,555 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:48,555 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:48,571 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:48,571 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:49,570 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:49,570 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:49,586 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:49,586 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:50,586 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:50,586 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:50,601 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:50,601 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:51,601 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:51,601 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:51,617 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:51,617 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:52,601 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:52,601 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:52,632 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:52,632 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:53,616 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:53,616 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:53,648 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:53,648 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:54,632 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:54,632 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:54,663 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:54,663 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:54,960 apTestClient:0112] [:(] Opening 10.26.138.46
[I 2022-07-20 15:01:54,960 apTestClient:0116] [:(] 10.26.138.46
[I 2022-07-20 15:01:54,975 apServerListener:0137] [:(] Wait for Client event PROTOCOL_DESCRIPTOR
[I 2022-07-20 15:01:54,975 apServerListener:0647] [:(] PROTOCOL DESCRIPOR RECEIVED
[I 2022-07-20 15:01:54,975 apEventHandler:0041] [:(] Got Event: PROTOCOL_DESCRIPTOR
[I 2022-07-20 15:01:54,991 conftest:0262] [:(] Invoking HTTPServer fixture
[I 2022-07-20 15:01:54,991 apServerListener:0479] [:(] SERVER IS SUSPENDED
[I 2022-07-20 15:01:54,991 apEventHandler:0041] [:(] Got Event: SUSPENDED
[I 2022-07-20 15:01:54,991 apEventHandler:0041] [:(] Got Event: LATENCYUPDATE
[I 2022-07-20 15:01:54,991 apServerListener:0644] [:(] LATENCYUPDATE MESSAGE
[I 2022-07-20 15:01:54,991 apServerListener:0502] [:(] CAPABILITIES MESSAGE
[I 2022-07-20 15:01:55,006 apEventHandler:0041] [:(] Got Event: CAPABILITIES
[I 2022-07-20 15:01:55,006 apServerListener:0464] [:(] ZONE_STATEMSG RECVD: status: DISCONNECTED
change_reason: COMMANDED

[I 2022-07-20 15:01:55,006 apEventHandler:0041] [:(] Got Event: I_AM_NOT_A_SLAVE
[I 220720 15:01:55.022 SampleMusicServer:67] [:(] started sample music server...
[I 2022-07-20 15:01:55,022 conftest:0273] [:(] Main music url http://10.26.138.25:22794/pulse_every_1_second_1_min.wav
[I 2022-07-20 15:01:55,022 conftest:0683] [:(] -----------------------
[I 2022-07-20 15:01:55,022 conftest:0684] [:(] TEST SETUP PASSED
[I 2022-07-20 15:01:55,022 conftest:0685] [:(] Test: test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav-44100]
[I 2022-07-20 15:01:55,022 conftest:0686] [:(] DateTime: 2022-07-20 15:01:55.022466
[I 2022-07-20 15:01:55,022 conftest:0687] [:(] ------------------------
[I 2022-07-20 15:01:55,022 test_a2dp_play:0139] [:(] TEST: test_a2dp_audio_play
[I 2022-07-20 15:01:55,022 test_a2dp_play:0047] [:(] initialize_a2dp_capture_test
[I 2022-07-20 15:01:55,038 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:01:55,038 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:01:55,038 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:01:55,038 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:01:55.038 SpitfireMessaging:361] Sending request with transaction id 2 (0x2)
[D Jul-20 15:01:55.053 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:55,053 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 2
[I 2022-07-20 15:01:55,100 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 2
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:01:55,100 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:01:55,100 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[I 2022-07-20 15:01:55,100 sink_group:0030] [:(] clear_audio_stream_status: BOTH
[I 2022-07-20 15:01:55,100 SpitfireComponentMessaging:0323] [:(] Right: clear_event(aud): event_id: 0
[I 2022-07-20 15:01:55,100 SpitfireComponentMessaging:0323] [:(] Right: clear_event(aud): event_id: 1
[I 2022-07-20 15:01:55,100 SpitfireComponentMessaging:0323] [:(] Left: clear_event(aud): event_id: 0
[I 2022-07-20 15:01:55,100 SpitfireComponentMessaging:0323] [:(] Left: clear_event(aud): event_id: 1
[I 2022-07-20 15:01:55,100 test_a2dp_play:0118] [:(] set_codec_connect_and_check
[I 2022-07-20 15:01:55,100 helper_functions:0866] [:(] set_sbc_codec_connect_and_check
[I 2022-07-20 15:01:55,100 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:01:55,100 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:01:55,100 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:01:55,100 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:01:55.100 SpitfireMessaging:361] Sending request with transaction id 3 (0x3)
[D Jul-20 15:01:55.116 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:55,116 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 3
[I 2022-07-20 15:01:55,163 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 3
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:01:55,163 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:01:55,163 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[I 2022-07-20 15:01:55,163 helper_functions:0833] [:(] set_a2dp_sbc_codecParams
[D 2022-07-20 15:01:55,163 rivieraCommunication:0301] [:(] Executing ADB shell(device): /opt/Bose/bin/frontdoorutil -c POST /bluetooth/source/updateCodecParams '{ "codec_type":"SBC", "sbc_codec":{"channel":"JOINT_STEREO", "sample_freq":"SAMPLE_RATE_44100"}}'
[I 2022-07-20 15:01:55,366 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:01:55,366 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:01:55,366 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:01:55,366 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:01:55.381 SpitfireMessaging:361] Sending request with transaction id 4 (0x4)
[D Jul-20 15:01:55.381 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:55,381 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 4
[I 2022-07-20 15:01:55,428 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 4
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:01:55,428 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:01:55,428 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[I 2022-07-20 15:01:55,428 helper_functions:0143] [:(] connect_and_wait_for_profile_connected: attempt 1 of 3
[I 2022-07-20 15:01:55,428 helper_functions:0097] [:(] pair_list_clear_and_pair_source
[I 2022-07-20 15:01:55,428 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:01:55,428 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:01:55,428 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:01:55,428 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:01:55.444 SpitfireMessaging:361] Sending request with transaction id 5 (0x5)
[D Jul-20 15:01:55.460 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:55,460 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 5
[I 2022-07-20 15:01:55,506 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 5
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:01:55,506 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:01:55,522 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[D 2022-07-20 15:01:55,522 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:01:55,522 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:01:55,522 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/sink/macAddr
[D 2022-07-20 15:01:55,522 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:01:55,522 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/sink/macAddr', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 2}}
[D 2022-07-20 15:01:55,522 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:01:55,522 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 2,
        "resource": "/bluetooth/sink/macAddr",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:55,522 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 2,
        "resource": "/bluetooth/sink/macAddr",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:55,522 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/sink/macAddr
[D 2022-07-20 15:01:55,631 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "mac": "28:11:a5:a5:cb:a8"
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 2,
        "resource": "/bluetooth/sink/macAddr",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:01:55,631 sink_group:0057] [:(] check_pair_status: RIGHT
[I 2022-07-20 15:01:55,631 bt_spitfire_helper:0206] [:(] Right: check_pair_status
[W 2022-07-20 15:01:55,647 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:55,647 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:55,678 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:55,678 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:55,834 bt_spitfire_helper:0278] [:(] Right: cor.bt list response: ' 3) 28:11:a5:a5:cb:a8  ............ H    896c 6cbd 3f95 c3cf 82d6 b5bc b2a7 67ca BA8BCC HS 300'
[I 2022-07-20 15:01:55,834 helper_functions:0160] [:(] check_source_pair_status
[D 2022-07-20 15:01:55,834 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:01:55,834 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:01:55,834 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/source/list
[D 2022-07-20 15:01:55,834 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:01:55,834 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/list', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 3}}
[D 2022-07-20 15:01:55,834 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:01:55,850 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 3,
        "resource": "/bluetooth/source/list",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:55,850 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 3,
        "resource": "/bluetooth/source/list",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:55,850 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/list
[D 2022-07-20 15:01:55,928 bt_notification:0392] [:(] _source_list_cb
[D 2022-07-20 15:01:55,990 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "devices": [
            {
                "deviceClass": "240404",
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls",
                "productId": 0,
                "variantId": 0
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 3,
        "resource": "/bluetooth/source/list",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:01:55,990 sink_group:0030] [:(] enter_pair_state: RIGHT
[I 2022-07-20 15:01:55,990 bt_spitfire_helper:0237] [:(] Right: enter_pair_state
[I 2022-07-20 15:01:55,990 SpitfireBluetoothMessage:0032] [:(] Right: send_bt_pairing_command for mode: 1
[I 2022-07-20 15:01:55,990 SpitfireComponentMessaging:0293] [:(] Right: send_command(bt): cmd_id= 0
[D Jul-20 15:01:56.006 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:01:56,006 helper_functions:0124] [:(] connect_and_check
[I 2022-07-20 15:01:56,006 bt_notification:0307] [:(] register_for_source_profile_states
[D 2022-07-20 15:01:56,006 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:01:56,006 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:01:56,006 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/source/list
[D 2022-07-20 15:01:56,006 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:01:56,006 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/list', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 4}}
[D 2022-07-20 15:01:56,006 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:01:56,006 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 4,
        "resource": "/bluetooth/source/list",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:56,022 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 4,
        "resource": "/bluetooth/source/list",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:56,022 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/list
[D 2022-07-20 15:01:56,053 bt_notification:0392] [:(] _source_list_cb
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "devices": [
            {
                "deviceClass": "240404",
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls",
                "productId": 0,
                "variantId": 0
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 4,
        "resource": "/bluetooth/source/list",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:01:56,100 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(bt): context= 0
[I 2022-07-20 15:01:56,100 helper_functions:0131] [:(]  sink device mac address ['78:2b:64:7c:45:be']
[I 2022-07-20 15:01:56,100 SpitfireComponentMessaging:0082] [:(] Right: Got 'bt' Event: 0
 --- Data ---
mode: enter
reason: other

[D 2022-07-20 15:01:56,100 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0376] [:(] Sending POST to /bluetooth/source/connect
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0379] [:(] Enveloping data: {
    "mac": "78:2b:64:7c:45:be"
}
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/connect', 'version': 1, 'token': '12345', 'method': 'POST', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 5}}
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{
    "mac": "78:2b:64:7c:45:be"
}
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 5,
        "resource": "/bluetooth/source/connect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 5,
        "resource": "/bluetooth/source/connect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:56,100 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/connect
[D 2022-07-20 15:01:56,162 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:01:56,178 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_CONNECTING expected = DEVICE_CONNECTED
[D 2022-07-20 15:01:56,256 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "deviceClass": "000000",
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "status": "DEVICE_CONNECTING",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:56,287 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:01:56,319 bt_notification:0401] [:(] _source_app_status_cb received = APP_CONNECTING expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:01:56,350 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "devices": [],
        "status": "APP_CONNECTING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:56,412 FrontDoorAPI:0397] [:(] The returned response is:
{
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "RESPONSE",
        "reqID": 5,
        "resource": "/bluetooth/source/connect",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:01:56,412 bt_notification:0255] [:(] wait_for_source_connection_status_changed_notification
[W 2022-07-20 15:01:56,647 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:56,647 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:56,694 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:56,694 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:56,897 bt_notification:0586] [:(] _acl_status_cb
[I 2022-07-20 15:01:56,897 bt_notification:0587] [:(] {'header': {'device': 'b13a8018-0ead-1570-8a2a-b936b18bd42c', 'resource': '/bluetooth/aclConnectionStatus', 'method': 'NOTIFY', 'version': 1.0}, 'body': {'is_connected': True, 'mac': '78:2b:64:7c:45:be', 'reason': 0, 'type': 'CLASSIC'}}
[D 2022-07-20 15:01:56,912 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "is_connected": true,
        "mac": "78:2b:64:7c:45:be",
        "reason": 0,
        "type": "CLASSIC"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/aclConnectionStatus",
        "version": 1.0
    }
}
[I 2022-07-20 15:01:57,069 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(bt): context= 0
[I 2022-07-20 15:01:57,069 SpitfireComponentMessaging:0082] [:(] Right: Got 'bt' Event: 0
 --- Data ---
mode: exit
reason: handset_connected

[I 2022-07-20 15:01:57,162 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[I 2022-07-20 15:01:57,162 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 31
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D 2022-07-20 15:01:57,303 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:01:57,303 bt_notification:0401] [:(] _source_app_status_cb received = APP_CONNECTED expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:01:57,303 bt_notification:0406] [:(] Threading event sourceAppStatusNotifEvent set successfully
[D 2022-07-20 15:01:57,318 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "activeDevice": "78:2b:64:7c:45:be",
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ],
        "status": "APP_CONNECTED"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:57,318 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:01:57,318 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_A2DP",
        "status": "PROFILE_CONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_UNINITIALIZED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_UNINITIALIZED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_UNINITIALIZED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:57,365 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:01:57,365 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_CONNECTED expected = DEVICE_CONNECTED
[D 2022-07-20 15:01:57,365 bt_notification:0356] [:(] Threading event sourceConnectionStatusNotifEvent set successfully
[I 2022-07-20 15:01:57,365 bt_notification:0288] [:(] wait_for_source_status_notification
[D 2022-07-20 15:01:57,365 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "delay": 1500,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "serialNumber": "",
        "status": "DEVICE_CONNECTED",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:57,365 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:01:57,381 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:01:57,381 bt_notification:0392] [:(] _source_list_cb
[D 2022-07-20 15:01:57,381 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/source/connect
[D 2022-07-20 15:01:57,381 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/list",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:57,381 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:01:57,381 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/connect', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 6}}
[D 2022-07-20 15:01:57,381 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:01:57,381 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 6,
        "resource": "/bluetooth/source/connect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:57,381 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 6,
        "resource": "/bluetooth/source/connect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:01:57,381 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/connect
[D 2022-07-20 15:01:57,443 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 6,
        "resource": "/bluetooth/source/connect",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:01:57,443 bt_notification:0201] [:(] wait_for_source_profiles_status_notification
[D 2022-07-20 15:01:57,553 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:01:57,553 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_HFAG",
        "status": "PROFILE_CONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_UNINITIALIZED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_UNINITIALIZED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:57,553 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:01:57,553 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_CONNECTED expected = DEVICE_CONNECTED
[D 2022-07-20 15:01:57,568 bt_notification:0356] [:(] Threading event sourceConnectionStatusNotifEvent set successfully
[D 2022-07-20 15:01:57,568 bt_notification:0359] [:(] _source_connection_status_cb received = True expected = True
[D 2022-07-20 15:01:57,568 bt_notification:0362] [:(] Threading event sourceSPPNotifEvent set successfully
[D 2022-07-20 15:01:57,568 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "bmapConnected": true,
        "delay": 1500,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "serialNumber": "",
        "status": "DEVICE_CONNECTED",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:57,568 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:01:57,568 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_SPP",
        "status": "PROFILE_CONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_UNINITIALIZED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_CONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[W 2022-07-20 15:01:57,662 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:57,662 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:57,709 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:57,709 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:01:57,927 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[I 2022-07-20 15:01:57,927 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
stream_type: VOICE
max_val: 15
current_val: 10
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:01:57,943 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(tel): context= 0
[I 2022-07-20 15:01:57,943 SpitfireComponentMessaging:0082] [:(] Right: Got 'tel' Event: 0
 --- Data ---
status: TEL_PROFILE_CONNECTED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D 2022-07-20 15:01:57,990 bt_notification:0549] [:(] _source_hfag_battery_level_cb received = NOTIFY
[D 2022-07-20 15:01:57,990 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "percentage": 0
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/hfagBatteryLevelStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:58,022 bt_notification:0476] [:(] _source_hfag_speaker_volume_cb received = NOTIFY
[D 2022-07-20 15:01:58,022 bt_notification:0480] [:(] Threading event sourceHfagSpeakerVolumesNotifEvent set successfully
[D 2022-07-20 15:01:58,022 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "type": "SPEAKER",
        "volume": 67
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/hfagVolume/speaker",
        "version": 1.0
    }
}
[D 2022-07-20 15:01:58,037 bt_notification:0469] [:(] _source_hfag_mic_volume_cb received = NOTIFY
[D 2022-07-20 15:01:58,037 bt_notification:0473] [:(] Threading event sourceHfagMicVolumeNotifEvent set successfully
[D 2022-07-20 15:01:58,037 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "type": "MIC",
        "volume": 100
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/hfagVolume/mic",
        "version": 1.0
    }
}
[W 2022-07-20 15:01:58,678 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:58,678 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:58,725 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:58,725 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:59,678 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:59,678 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:01:59,725 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:01:59,725 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[E 2022-07-20 15:02:00,006 apServerListener:0659] [:(] GetHeadder : Socket timout
[I 2022-07-20 15:02:00,631 apEventHandler:0041] [:(] Got Event: LATENCYUPDATE
[I 2022-07-20 15:02:00,631 apServerListener:0644] [:(] LATENCYUPDATE MESSAGE
[W 2022-07-20 15:02:00,693 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:00,693 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:00,741 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:00,741 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:00,944 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:00,944 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_AVRCP",
        "status": "PROFILE_CONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_CONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:00,944 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:00,959 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:00,959 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/sink/macAddr
[D 2022-07-20 15:02:00,959 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:02:00,959 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/sink/macAddr', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 7}}
[D 2022-07-20 15:02:00,959 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:02:00,959 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 7,
        "resource": "/bluetooth/sink/macAddr",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:00,959 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 7,
        "resource": "/bluetooth/sink/macAddr",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:00,959 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/sink/macAddr
[D 2022-07-20 15:02:01,006 bt_notification:0331] [:(] _source_volume_cb received = NOTIFY
[D 2022-07-20 15:02:01,037 bt_notification:0335] [:(] Threading event sourceVolumeNotifEvent set successfully
[D 2022-07-20 15:02:01,068 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "volume": 100
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/volume",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:01,178 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "mac": "28:11:a5:a5:cb:a8"
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 7,
        "resource": "/bluetooth/sink/macAddr",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:01,178 sink_group:0030] [:(] wait_for_sink_profiles_connection_state: RIGHT
[I 2022-07-20 15:02:01,178 bt_spitfire_helper:0249] [:(] Right: wait_for_sink_profiles_connection_state: ['PROFILE_ID_AVRCP', 'PROFILE_ID_A2DP', 'PROFILE_ID_HFAG'] PROFILE_CONNECTED 28:11:a5:a5:cb:a8 30
[I 2022-07-20 15:02:01,381 bt_spitfire_helper:0278] [:(] Right: cor.bt list response: '*3) 28:11:a5:a5:cb:a8  h2........s. H    896c 6cbd 3f95 c3cf 82d6 b5bc b2a7 67ca BA8BCC HS 300'
[I 2022-07-20 15:02:01,381 bt_spitfire_helper:0370] [:(] Right: Current Profiles h2........s. H
[I 2022-07-20 15:02:01,381 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : v (PROFILE_ID_AVRCP)
[I 2022-07-20 15:02:01,381 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : 2 (PROFILE_ID_A2DP)
[I 2022-07-20 15:02:01,381 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : h (PROFILE_ID_HFP)
[I 2022-07-20 15:02:01,444 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(mpl): context= 0
[I 2022-07-20 15:02:01,444 SpitfireComponentMessaging:0082] [:(] Right: Got 'mpl' Event: 0
 --- Data ---
status: PROFILE_CONNECTED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:01,459 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:01,459 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 31
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:01,506 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(mpl): context= 1
[I 2022-07-20 15:02:01,506 SpitfireComponentMessaging:0082] [:(] Right: Got 'mpl' Event: 1
 --- Data ---
status: MEDIA_STOPPED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:01,553 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(mpl): context= 2
[I 2022-07-20 15:02:01,553 SpitfireComponentMessaging:0082] [:(] Right: Got 'mpl' Event: 2
 --- Data ---
isTrackChanged: true
attributes {
  id: MPL_NOWPLAYING_TITLE
  len: 1
  attribute: " "
}

[W 2022-07-20 15:02:01,693 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:01,693 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:01,756 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:01,756 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:02,084 bt_spitfire_helper:0278] [:(] Right: cor.bt list response: '*3) 28:11:a5:a5:cb:a8  h2v.......s. H    896c 6cbd 3f95 c3cf 82d6 b5bc b2a7 67ca BA8BCC HS 300'
[I 2022-07-20 15:02:02,084 bt_spitfire_helper:0370] [:(] Right: Current Profiles h2v.......s. H
[I 2022-07-20 15:02:02,084 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : v (PROFILE_ID_AVRCP)
[I 2022-07-20 15:02:02,084 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : 2 (PROFILE_ID_A2DP)
[I 2022-07-20 15:02:02,099 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : h (PROFILE_ID_HFP)
[I 2022-07-20 15:02:02,099 helper_functions:0208] [:(] set_volume
[D 2022-07-20 15:02:02,099 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:02,099 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:02,115 FrontDoorAPI:0376] [:(] Sending POST to /bluetooth/source/volume
[D 2022-07-20 15:02:02,115 FrontDoorAPI:0379] [:(] Enveloping data: {
    "volume": 90
}
[D 2022-07-20 15:02:02,115 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/volume', 'version': 1, 'token': '12345', 'method': 'POST', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 8}}
[D 2022-07-20 15:02:02,115 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{
    "volume": 90
}
[D 2022-07-20 15:02:02,115 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "volume": 90
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 8,
        "resource": "/bluetooth/source/volume",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:02,115 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "volume": 90
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 8,
        "resource": "/bluetooth/source/volume",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:02,115 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/volume
[D 2022-07-20 15:02:02,162 bt_notification:0331] [:(] _source_volume_cb received = POST
[D 2022-07-20 15:02:02,193 FrontDoorAPI:0397] [:(] The returned response is:
{
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "RESPONSE",
        "reqID": 8,
        "resource": "/bluetooth/source/volume",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:02,193 helper_functions:0851] [:(] get_a2dp_CodecParams
[D 2022-07-20 15:02:02,193 rivieraCommunication:0301] [:(] Executing ADB shell(device): /opt/Bose/bin/frontdoorutil -c POST /bluetooth/source/codecParams '{"mac":"78:2b:64:7c:45:be"}'
[I 2022-07-20 15:02:02,209 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:02,209 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 28
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D 2022-07-20 15:02:02,209 bt_notification:0331] [:(] _source_volume_cb received = NOTIFY
[D 2022-07-20 15:02:02,209 bt_notification:0335] [:(] Threading event sourceVolumeNotifEvent set successfully
[D 2022-07-20 15:02:02,209 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "volume": 90
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/volume",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:02,256 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:02,256 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 28
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:02,271 sink_group:0086] [:(] send_audio_prepare_output_request: BOTH
[I 2022-07-20 15:02:02,271 SpitfireAudioMessage:0687] [:(] Right: send_audio_prepare_output_request for prepare: True chain: True hwPower: True, unlock: True
[I 2022-07-20 15:02:02,271 SpitfireComponentMessaging:0210] [:(] Right: send_request(aud): message_id= 35
[D Jul-20 15:02:02.271 SpitfireMessaging:361] Sending request with transaction id 6 (0x6)
[D Jul-20 15:02:02.287 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:02,287 SpitfireAudioMessage:0687] [:(] Left: send_audio_prepare_output_request for prepare: True chain: True hwPower: True, unlock: True
[I 2022-07-20 15:02:02,287 SpitfireComponentMessaging:0210] [:(] Left: send_request(aud): message_id= 35
[D Jul-20 15:02:02.287 SpitfireMessaging:361] Sending request with transaction id 2 (0x2)
[D Jul-20 15:02:02.302 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:02,302 sink_group:0086] [:(] check_audio_prepare_output_event: BOTH
[I 2022-07-20 15:02:02,318 SpitfireAudioMessage:0723] [:(] Right: check_audio_prepare_output_event: prepared: True, chain: True, hwPower: True, unlock: True, timeout_s: 10
[I 2022-07-20 15:02:02,318 SpitfireAudioMessage:0742] [:(] Right: Got expected Audio output event: prepared True, chain True, hwPower True, unlock True : prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:02:02,318 SpitfireAudioMessage:0723] [:(] Left: check_audio_prepare_output_event: prepared: True, chain: True, hwPower: True, unlock: True, timeout_s: 10
[I 2022-07-20 15:02:02,318 SpitfireAudioMessage:0742] [:(] Left: Got expected Audio output event: prepared True, chain True, hwPower True, unlock True : prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:02:02,318 helper_functions:0242] [:(] Main music url http://10.26.138.25:22794/testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav
[I 2022-07-20 15:02:02,318 test_a2dp_play:0153] [:(] stream_url = http://10.26.138.25:22794/testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav
[I 2022-07-20 15:02:02,318 helper_functions:0226] [:(] play_primary_stream url=http://10.26.138.25:22794/testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav
[I 2022-07-20 15:02:02,334 SpitfireComponentMessaging:0199] [:(] Right: Response(aud): message_id: 35, request_id: 2
 --- payload---
success: true


[I 2022-07-20 15:02:02,334 apTestClient:0229] [:(]  SETURL
[I 2022-07-20 15:02:02,334 apTestClient:0287] [:(] url: "http://10.26.138.25:22794/testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav"
url_is_realtime: false
connection_timeout_in_ms: 20000
buffering_timeout_in_ms: 180000
source_dryup_timeout_ms: 30000
source_retry_delay_ms: 5000
source_retry_count: 5
dist_range: MULTIROOM
url_uuid: "80187cad61c14f9d9abc143d9ec0a3f9"

[I 2022-07-20 15:02:02,349 apTestClient:0315] [:(] TRANSPORT CONTROL PLAY, url_id: 0  url_uuid 80187cad61c14f9d9abc143d9ec0a3f9
[I 2022-07-20 15:02:02,349 SpitfireComponentMessaging:0199] [:(] Left: Response(aud): message_id: 35, request_id: 2
 --- payload---
success: true


[I 2022-07-20 15:02:02,349 apServerListener:0572] [:(] VolumeControl 10
[I 2022-07-20 15:02:02,349 helper_functions:0229] [:(] primary stream urlUuid=80187cad61c14f9d9abc143d9ec0a3f9
[I 2022-07-20 15:02:02,349 apEventHandler:0041] [:(] Got Event: VOLUMECONTROL
[I 2022-07-20 15:02:02,349 apServerListener:0221] [:(] Wait for Stream Event PLAYING id 80187cad61c14f9d9abc143d9ec0a3f9
[I 2022-07-20 15:02:02,396 apServerListener:0249] [:(] SETURL Response 15:02:02.396748 url: True, url_id: http://10.26.138.25:22794/testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav, url_uuid: 1
[I 2022-07-20 15:02:02,396 apEventHandler:0041] [:(] Got Event: SETURL
[I 2022-07-20 15:02:02,412 apEventHandler:0041] [:(] Got Event: CONNECTING
[I 2022-07-20 15:02:02,412 apServerListener:0395] [:(] different prefetch_type received : streamId : 80187cad61c14f9d9abc143d9ec0a3f9 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:02,412 apEventHandler:0041] [:(] Got Event: PREFETCH_TYPE
[I 2022-07-20 15:02:02,412 apServerListener:0398] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' PREFETCH_TYPE ', '0']
[I 2022-07-20 15:02:02,412 apServerListener:0409] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' FRONTED']
[I 2022-07-20 15:02:02,412 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:02,412 apServerListener:0415] [:(] 15:02:02.412351 SERVERSTATE streamId: 80187cad61c14f9d9abc143d9ec0a3f9 Update CONNECTING stoppedReason: NA milliseconds: 0 byte_offset 0 total_length 0 prefetchReady: False prefetchType: 0
[I 2022-07-20 15:02:02,412 apServerListener:0614] [:(] Stream State received from client 10.26.138.46
[I 2022-07-20 15:02:02,412 apServerListener:0629] [:(] Stream state - isSilent: True
[I 2022-07-20 15:02:02,412 apEventHandler:0041] [:(] Got Event: STREAMSTATE
10.26.138.46 - - [20/Jul/2022 15:02:02] "GET /testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav HTTP/1.1" 200 -
[I 220720 15:02:02.412 SampleMusicServer:39] [:(] FILESIZE 1764044
[I 2022-07-20 15:02:02,459 apServerListener:0288] [:(] TRANSPORT PLAY url_id: 0 url_uuid: 80187cad61c14f9d9abc143d9ec0a3f9
[I 2022-07-20 15:02:02,459 apEventHandler:0041] [:(] Got Event: TRANSPORTCONTROL
[I 2022-07-20 15:02:02,459 apServerListener:0482] [:(] SERVER IS UNSUSPENDED
[I 2022-07-20 15:02:02,474 apEventHandler:0041] [:(] Got Event: UNSUSPENDED
[I 2022-07-20 15:02:02,474 apEventHandler:0041] [:(] Got Event: BUFFERING
[I 2022-07-20 15:02:02,474 apServerListener:0400] [:(] same prefetch_type received : streamId : 80187cad61c14f9d9abc143d9ec0a3f9 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:02,474 apServerListener:0409] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' FRONTED']
[I 2022-07-20 15:02:02,474 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:02,474 apServerListener:0415] [:(] 15:02:02.474753 SERVERSTATE streamId: 80187cad61c14f9d9abc143d9ec0a3f9 Update BUFFERING stoppedReason: NA milliseconds: 0 byte_offset 0 total_length 0 prefetchReady: False prefetchType: 0
[I 2022-07-20 15:02:02,474 apServerListener:0614] [:(] Stream State received from client 10.26.138.46
[I 2022-07-20 15:02:02,474 apServerListener:0629] [:(] Stream state - isSilent: True
[I 2022-07-20 15:02:02,474 apEventHandler:0041] [:(] Got Event: STREAMSTATE
[I 2022-07-20 15:02:02,537 apEventHandler:0041] [:(] Got Event: PLAYING
[I 2022-07-20 15:02:02,537 apServerListener:0400] [:(] same prefetch_type received : streamId : 80187cad61c14f9d9abc143d9ec0a3f9 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:02,537 helper_functions:0231] [:(] play_stream is playing now
[I 2022-07-20 15:02:02,537 apServerListener:0409] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' FRONTED']
[I 2022-07-20 15:02:02,537 sink_group:0086] [:(] check_audio_stream_status: BOTH
[I 2022-07-20 15:02:02,537 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:02,537 SpitfireAudioMessage:0245] [:(] Right: check_audio_stream_status: Event: 0, Expected Stream type: 0, State: 3, DuckedState: 1, expected_reason: None, stream_id: None
[I 2022-07-20 15:02:02,537 apServerListener:0415] [:(] 15:02:02.537243 SERVERSTATE streamId: 80187cad61c14f9d9abc143d9ec0a3f9 Update PLAYING stoppedReason: NA milliseconds: 4 byte_offset 1972 total_length 0 prefetchReady: False prefetchType: 0
[I 2022-07-20 15:02:02,537 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 0
[I 2022-07-20 15:02:02,537 apServerListener:0614] [:(] Stream State received from client 10.26.138.46
[I 2022-07-20 15:02:02,537 apServerListener:0629] [:(] Stream state - isSilent: False
[I 2022-07-20 15:02:02,537 apEventHandler:0041] [:(] Got Event: STREAMSTATE
[W 2022-07-20 15:02:02,709 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:02,709 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:02,771 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:02,771 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:02,881 apServerListener:0400] [:(] same prefetch_type received : streamId : 80187cad61c14f9d9abc143d9ec0a3f9 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:02,881 apServerListener:0409] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' FRONTED']
[I 2022-07-20 15:02:02,881 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:02,896 apServerListener:0415] [:(] 15:02:02.881255 SERVERSTATE streamId: 80187cad61c14f9d9abc143d9ec0a3f9 Update PLAYING stoppedReason: NA milliseconds: 360 byte_offset 65596 total_length 0 prefetchReady: False prefetchType: 0
[D 2022-07-20 15:02:03,427 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:02:03,427 bt_notification:0401] [:(] _source_app_status_cb received = APP_PLAYING expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:03,427 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "activeDevice": "78:2b:64:7c:45:be",
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ],
        "status": "APP_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:03,552 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 0
[W 2022-07-20 15:02:03,552 api:0040] [:(] Right: Event 0 wait timed out, retrying in 1 seconds...
[I 2022-07-20 15:02:03,583 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 0
[I 2022-07-20 15:02:03,583 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 0
[I 2022-07-20 15:02:03,583 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 0
 --- Data ---
streamStatus {
  streamState: PLAYING
  duckedState: FRONTED
  toneArgs {
  }
}

[I 2022-07-20 15:02:03,583 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 0
 --- Data ---
streamStatus {
  streamState: PLAYING
  duckedState: FRONTED
  toneArgs {
  }
}

[D 2022-07-20 15:02:03,615 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:03,615 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_CONNECTED expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:03,615 bt_notification:0356] [:(] Threading event sourceConnectionStatusNotifEvent set successfully
[D 2022-07-20 15:02:03,615 bt_notification:0359] [:(] _source_connection_status_cb received = True expected = True
[D 2022-07-20 15:02:03,615 bt_notification:0362] [:(] Threading event sourceSPPNotifEvent set successfully
[D 2022-07-20 15:02:03,615 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "bmapConnected": true,
        "delay": 1500,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "serialNumber": "",
        "status": "DEVICE_CONNECTED",
        "streamState": "PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:03,724 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:03,724 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:03,786 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:03,786 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:03,896 apServerListener:0400] [:(] same prefetch_type received : streamId : 80187cad61c14f9d9abc143d9ec0a3f9 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:03,896 apServerListener:0409] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' FRONTED']
[I 2022-07-20 15:02:03,896 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:03,896 apServerListener:0415] [:(] 15:02:03.896334 SERVERSTATE streamId: 80187cad61c14f9d9abc143d9ec0a3f9 Update PLAYING stoppedReason: NA milliseconds: 1360 byte_offset 241044 total_length 0 prefetchReady: False prefetchType: 0
[I 2022-07-20 15:02:04,489 apEventHandler:0041] [:(] Got Event: READY_FOR_PREFETCH
[I 2022-07-20 15:02:04,489 apServerListener:0400] [:(] same prefetch_type received : streamId : 80187cad61c14f9d9abc143d9ec0a3f9 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:04,489 apServerListener:0409] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' FRONTED']
[I 2022-07-20 15:02:04,505 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:04,505 apServerListener:0415] [:(] 15:02:04.489908 SERVERSTATE streamId: 80187cad61c14f9d9abc143d9ec0a3f9 Update PLAYING stoppedReason: NA milliseconds: 1968 byte_offset 349012 total_length 0 prefetchReady: True prefetchType: 0
[I 2022-07-20 15:02:04,568 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 0
[I 2022-07-20 15:02:04,568 SpitfireAudioMessage:0268] [:(] Right: Got expected Audio stream event: stream type 0, state 3, ducked_state 1, streamStatus {
  streamState: PLAYING
  duckedState: FRONTED
  toneArgs {
  }
}

[I 2022-07-20 15:02:04,568 SpitfireAudioMessage:0245] [:(] Left: check_audio_stream_status: Event: 0, Expected Stream type: 0, State: 3, DuckedState: 1, expected_reason: None, stream_id: None
[I 2022-07-20 15:02:04,568 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 0
[I 2022-07-20 15:02:04,568 SpitfireAudioMessage:0268] [:(] Left: Got expected Audio stream event: stream type 0, state 3, ducked_state 1, streamStatus {
  streamState: PLAYING
  duckedState: FRONTED
  toneArgs {
  }
}

[I 2022-07-20 15:02:04,568 sink_group:0030] [:(] set_volume: RIGHT
[I 2022-07-20 15:02:04,568 bt_spitfire_helper:0968] [:(] Right: set_volume: volume = 100
[I 2022-07-20 15:02:04,568 bt_spitfire_helper:0939] [:(] Right: get_volume_range: stream_type 0
[I 2022-07-20 15:02:04,568 SpitfireAudioMessage:0314] [:(] Right: get_abs_volume_request stream_type: 0
[I 2022-07-20 15:02:04,568 SpitfireComponentMessaging:0210] [:(] Right: send_request(aud): message_id= 29
[D Jul-20 15:02:04.568 SpitfireMessaging:361] Sending request with transaction id 7 (0x7)
[D Jul-20 15:02:04.583 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:04,583 SpitfireAudioMessage:0353] [:(] Right: check_abs_volume_response
[I 2022-07-20 15:02:04,583 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(aud): message_id: 29 and request_id: 3
[I 2022-07-20 15:02:04,630 SpitfireComponentMessaging:0199] [:(] Right: Response(aud): message_id: 29, request_id: 3
 --- payload---
max_val: 31
current_val: 28


[I 2022-07-20 15:02:04,630 bt_spitfire_helper:0973] [:(] Right: set_volume: set_abs_vol = 31
[I 2022-07-20 15:02:04,630 SpitfireAudioMessage:0299] [:(] Right: send_abs_volume_request volume: 31 stream_type: 0
[I 2022-07-20 15:02:04,630 SpitfireComponentMessaging:0210] [:(] Right: send_request(aud): message_id= 28
[D Jul-20 15:02:04.630 SpitfireMessaging:361] Sending request with transaction id 8 (0x8)
[D Jul-20 15:02:04.646 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:04,646 SpitfireAudioMessage:0353] [:(] Right: check_abs_volume_response
[I 2022-07-20 15:02:04,646 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(aud): message_id: 28 and request_id: 4
[W 2022-07-20 15:02:04,739 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:04,739 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:04,802 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:04,802 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:04,880 apServerListener:0400] [:(] same prefetch_type received : streamId : 80187cad61c14f9d9abc143d9ec0a3f9 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:04,880 apServerListener:0409] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' FRONTED']
[I 2022-07-20 15:02:04,896 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:04,896 apServerListener:0415] [:(] 15:02:04.880778 SERVERSTATE streamId: 80187cad61c14f9d9abc143d9ec0a3f9 Update PLAYING stoppedReason: NA milliseconds: 2360 byte_offset 418420 total_length 0 prefetchReady: True prefetchType: 0
[I 2022-07-20 15:02:05,021 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:05,021 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:05,021 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 31

[I 2022-07-20 15:02:05,021 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 31

[D 2022-07-20 15:02:05,021 bt_notification:0331] [:(] _source_volume_cb received = NOTIFY
[I 2022-07-20 15:02:05,036 SpitfireComponentMessaging:0199] [:(] Right: Response(aud): message_id: 28, request_id: 4
 --- payload---
max_val: 31
current_val: 31


[D 2022-07-20 15:02:05,036 bt_notification:0335] [:(] Threading event sourceVolumeNotifEvent set successfully
[I 2022-07-20 15:02:05,036 sink_group:0057] [:(] check_audio_music_codec: BOTH
[I 2022-07-20 15:02:05,036 bt_spitfire_helper:0315] [:(] Right: check_audio_music_codec: SBC
[D 2022-07-20 15:02:05,036 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "volume": 100
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/volume",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:05,083 bt_spitfire_helper:0278] [:(] Right: aud.a2dpcodec response: 'A2DP codec: SBC'
[I 2022-07-20 15:02:05,083 bt_spitfire_helper:0323] [:(] Right: Current codec SBC matches expected
[I 2022-07-20 15:02:05,083 bt_spitfire_helper:0315] [:(] Left: check_audio_music_codec: SBC
[I 2022-07-20 15:02:05,130 bt_spitfire_helper:0278] [:(] Left: aud.a2dpcodec response: 'A2DP codec: SBC'
[I 2022-07-20 15:02:05,130 bt_spitfire_helper:0323] [:(] Left: Current codec SBC matches expected
[I 2022-07-20 15:02:05,130 conftest:0697] [:(] -----------------------
[I 2022-07-20 15:02:05,130 conftest:0698] [:(] TEST PASSED
[I 2022-07-20 15:02:05,130 conftest:0699] [:(] Test: test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav-44100]
[I 2022-07-20 15:02:05,130 conftest:0700] [:(] DateTime: 2022-07-20 15:02:05.130419
[I 2022-07-20 15:02:05,130 conftest:0701] [:(] ------------------------
PASSED[I 2022-07-20 15:02:05,146 test_a2dp_play:0078] [:(] ---------------START TEARDOWN---------------------
[I 2022-07-20 15:02:05,146 apTestClient:0315] [:(] TRANSPORT CONTROL STOP, url_id: 0  url_uuid 80187cad61c14f9d9abc143d9ec0a3f9
[I 2022-07-20 15:02:05,146 apServerListener:0221] [:(] Wait for Stream Event STOPPED id 80187cad61c14f9d9abc143d9ec0a3f9
[I 2022-07-20 15:02:05,161 apServerListener:0288] [:(] TRANSPORT STOP url_id: 0 url_uuid: 80187cad61c14f9d9abc143d9ec0a3f9
[I 2022-07-20 15:02:05,161 apEventHandler:0041] [:(] Got Event: TRANSPORTCONTROL
[I 2022-07-20 15:02:05,739 apEventHandler:0041] [:(] Got Event: STOPPED
[I 2022-07-20 15:02:05,739 apServerListener:0400] [:(] same prefetch_type received : streamId : 80187cad61c14f9d9abc143d9ec0a3f9 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:05,739 helper_functions:0065] [:(] is_source_connected
[I 2022-07-20 15:02:05,739 apServerListener:0409] [:(] ['Stream ', '80187cad61c14f9d9abc143d9ec0a3f9', ' FRONTED']
[D 2022-07-20 15:02:05,739 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[W 2022-07-20 15:02:05,755 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:05,739 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:05,755 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:05,755 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[I 2022-07-20 15:02:05,755 apServerListener:0415] [:(] 15:02:05.739649 SERVERSTATE streamId: 80187cad61c14f9d9abc143d9ec0a3f9 Update STOPPED stoppedReason: Interrupted milliseconds: 2712 byte_offset 480116 total_length 0 prefetchReady: True prefetchType: 0
[D 2022-07-20 15:02:05,755 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/source/status
[D 2022-07-20 15:02:05,755 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:02:05,755 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/status', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 9}}
[D 2022-07-20 15:02:05,755 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:02:05,755 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 9,
        "resource": "/bluetooth/source/status",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:05,755 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 9,
        "resource": "/bluetooth/source/status",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:05,755 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/status
[W 2022-07-20 15:02:05,833 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:05,848 apServerListener:0479] [:(] SERVER IS SUSPENDED
[I 2022-07-20 15:02:05,848 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:05,864 bt_notification:0397] [:(] _source_app_status_cb
[I 2022-07-20 15:02:05,911 apEventHandler:0041] [:(] Got Event: SUSPENDED
[D 2022-07-20 15:02:06,052 bt_notification:0401] [:(] _source_app_status_cb received = APP_PLAYING expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:06,067 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "activeDevice": "78:2b:64:7c:45:be",
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ],
        "status": "APP_PLAYING"
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 9,
        "resource": "/bluetooth/source/status",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:06,067 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:02:06,067 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:02:06,067 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:02:06,067 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:02:06.067 SpitfireMessaging:361] Sending request with transaction id 9 (0x9)
[D Jul-20 15:02:06.067 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:06,067 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 6
[I 2022-07-20 15:02:06,130 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 6
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:02:06,130 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:02:06,145 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0376] [:(] Sending POST to /bluetooth/source/disconnect
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0379] [:(] Enveloping data: {
    "mac": "78:2b:64:7c:45:be"
}
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/disconnect', 'version': 1, 'token': '12345', 'method': 'POST', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 10}}
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{
    "mac": "78:2b:64:7c:45:be"
}
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 10,
        "resource": "/bluetooth/source/disconnect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 10,
        "resource": "/bluetooth/source/disconnect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:06,145 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/disconnect
[D 2022-07-20 15:02:06,208 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:06,223 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_DISCONNECTING expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:06,239 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "status": "DEVICE_DISCONNECTING",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:06,286 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:02:06,348 bt_notification:0401] [:(] _source_app_status_cb received = APP_DISCONNECTING expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:06,348 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "activeDevice": "78:2b:64:7c:45:be",
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ],
        "status": "APP_DISCONNECTING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:06,364 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(tel): context= 0
[I 2022-07-20 15:02:06,364 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 0
[I 2022-07-20 15:02:06,426 SpitfireComponentMessaging:0082] [:(] Right: Got 'tel' Event: 0
 --- Data ---
status: TEL_PROFILE_DISCONNECTED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:06,348 apEventHandler:0041] [:(] Got Event: LATENCYUPDATE
[I 2022-07-20 15:02:06,426 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 0
 --- Data ---
streamStatus {
  streamState: COMPLETED
  duckedState: FRONTED
  reason: END_OF_TRACK
  toneArgs {
  }
}

[I 2022-07-20 15:02:06,426 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 0
[D 2022-07-20 15:02:06,426 FrontDoorAPI:0397] [:(] The returned response is:
{
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "RESPONSE",
        "reqID": 10,
        "resource": "/bluetooth/source/disconnect",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:06,426 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 0
 --- Data ---
streamStatus {
  streamState: COMPLETED
  duckedState: FRONTED
  reason: END_OF_TRACK
  toneArgs {
  }
}

[D 2022-07-20 15:02:06,426 bt_notification:0349] [:(] _source_connection_status_cb
[I 2022-07-20 15:02:06,426 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(mpl): context= 0
[I 2022-07-20 15:02:06,426 apServerListener:0644] [:(] LATENCYUPDATE MESSAGE
[I 2022-07-20 15:02:06,426 SpitfireComponentMessaging:0082] [:(] Right: Got 'mpl' Event: 0
 --- Data ---
status: PROFILE_DISCONNECTED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D 2022-07-20 15:02:06,426 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:06,426 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_DISCONNECTING expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:06,442 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:06,458 bt_notification:0359] [:(] _source_connection_status_cb received = False expected = True
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0376] [:(] Sending POST to /system/power/control
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "bmapConnected": false,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "status": "DEVICE_DISCONNECTING",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0379] [:(] Enveloping data: {
    "power": "OFF"
}
[D 2022-07-20 15:02:06,458 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/system/power/control', 'version': 1, 'token': '12345', 'method': 'POST', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 11}}
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_SPP",
        "status": "PROFILE_DISCONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_DISCONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{
    "power": "OFF"
}
[D 2022-07-20 15:02:06,458 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "power": "OFF"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 11,
        "resource": "/system/power/control",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_HFAG",
        "status": "PROFILE_DISCONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_DISCONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "power": "OFF"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 11,
        "resource": "/system/power/control",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:06,458 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0392] [:(] Getting the response for: /system/power/control
[D 2022-07-20 15:02:06,458 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_AVRCP",
        "status": "PROFILE_DISCONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_DISCONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:06,536 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:06,551 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_DISCONNECTED expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:06,598 bt_notification:0359] [:(] _source_connection_status_cb received = False expected = True
[D 2022-07-20 15:02:06,630 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "bmapConnected": false,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "status": "DEVICE_DISCONNECTED",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:06,692 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:02:06,723 bt_notification:0401] [:(] _source_app_status_cb received = APP_NOT_CONNECTED expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:06,755 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "devices": [
            {
                "deviceClass": "000000",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                }
            }
        ],
        "status": "APP_NOT_CONNECTED"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:06,770 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:06,801 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:06,958 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:07,004 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_A2DP",
        "status": "PROFILE_DISCONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_DISCONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:07,036 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:07,083 bt_notification:0586] [:(] _acl_status_cb
[I 2022-07-20 15:02:07,098 bt_notification:0587] [:(] {'header': {'device': 'b13a8018-0ead-1570-8a2a-b936b18bd42c', 'resource': '/bluetooth/aclConnectionStatus', 'method': 'NOTIFY', 'version': 1.0}, 'body': {'is_connected': False, 'mac': '78:2b:64:7c:45:be', 'reason': 22, 'type': 'CLASSIC'}}
[I 2022-07-20 15:02:07,114 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:07,270 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "is_connected": false,
        "mac": "78:2b:64:7c:45:be",
        "reason": 22,
        "type": "CLASSIC"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/aclConnectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:07,317 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "power": "OFF"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "RESPONSE",
        "reqID": 11,
        "resource": "/system/power/control",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:07,833 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:07,833 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:08,270 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:08,270 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:08,848 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:08,848 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:09,285 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:09,285 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:09,332 bt_notification:0572] [:(] wait_for_acl_disconnected_notification
[I 2022-07-20 15:02:09,332 sink_group:0030] [:(] clear_audio_stream_status: BOTH
[I 2022-07-20 15:02:09,332 SpitfireComponentMessaging:0323] [:(] Right: clear_event(aud): event_id: 0
[I 2022-07-20 15:02:09,332 SpitfireComponentMessaging:0323] [:(] Right: clear_event(aud): event_id: 1
[I 2022-07-20 15:02:09,332 SpitfireComponentMessaging:0323] [:(] Left: clear_event(aud): event_id: 0
[I 2022-07-20 15:02:09,332 SpitfireComponentMessaging:0323] [:(] Left: clear_event(aud): event_id: 1
[I 2022-07-20 15:02:09,332 sink_group:0030] [:(] clear_smartanr_power_status_event: BOTH
[I 2022-07-20 15:02:09,332 SpitfireComponentMessaging:0323] [:(] Right: clear_event(anr): event_id: 3
[I 2022-07-20 15:02:09,332 SpitfireComponentMessaging:0323] [:(] Left: clear_event(anr): event_id: 3
[I 2022-07-20 15:02:09,332 test_a2dp_play:0115] [:(] -----------------END TEARDOWN---------------------
[I 2022-07-20 15:02:09,332 conftest:0267] [:(] Stopping music server
[I 220720 15:02:09.332 SampleMusicServer:76] [:(] stopping sample music server...
[I 2022-07-20 15:02:09,332 conftest:0311] [:(] Closing apclient
[I 2022-07-20 15:02:09,332 apServerListener:0662] [:(] *****************HEADER READ EXCEPTION****************
[I 2022-07-20 15:02:09,332 apServerListener:0663] [:(] Error in header read
Traceback (most recent call last):
  File "C:\Users\111440\SpitfireWorkspace\testEnv\lib\site-packages\CastleAudioPathClientPyProto\APClient_py\apServerListener.py", line 657, in getHeader
    header = self.sock.recv(headerLen)
OSError: [WinError 10038] An operation was attempted on something that is not a socket
[I 2022-07-20 15:02:09,348 apServerListener:0664] [:(] ******************************************************
Closing socket
[I 2022-07-20 15:02:09,348 apFeatureFlags:0208] [:(] config not updated !!!
[I 2022-07-20 15:02:09,348 conftest:0314] [:(] apclient closed
[I 2022-07-20 15:02:09,348 apTestClient:0143] [:(] ServerListener is None

test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav-48000] [I 2022-07-20 15:02:09,348 conftest:0663] [:(] --------------------------------------------
[I 2022-07-20 15:02:09,348 conftest:0664] [:(] function    : test_a2dp_audio_play
[I 2022-07-20 15:02:09,348 conftest:0665] [:(] test name   : test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav-48000]
[I 2022-07-20 15:02:09,363 conftest:0666] [:(] time        : Wed Jul 20 15:02:09 2022
[I 2022-07-20 15:02:09,363 conftest:0667] [:(] ----------------------------------------------
[D 2022-07-20 15:02:09,363 conftest:0465] [:(] Invoking logread fixture
[I 2022-07-20 15:02:09,363 conftest:0478] [:(] --- SKIPPING LOGREAD and LOGCAT ---
[I 2022-07-20 15:02:09,363 conftest:0101] [:(] Invoking skip_test_if_condition
[I 2022-07-20 15:02:09,363 conftest:0130] [:(] Invoking skip_test_if_condition :- optional_audio_capture
[I 2022-07-20 15:02:09,363 conftest:0280] [:(] Invoking apClientFixture fixture
[I 2022-07-20 15:02:09,363 rivieraCommunication:0435] [:(] Get IP address with ADB connection
[I 2022-07-20 15:02:09,363 rivieraCommunication:0467] [:(] Get available network interfaces with ADB shell
[D 2022-07-20 15:02:09,363 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig | sed 's/[     ].*//;/^$/d'
[D 2022-07-20 15:02:09,426 rivieraCommunication:0470] [:(] Available Network Interfaces: '['eth0', 'lo', 'wlan0']'
[D 2022-07-20 15:02:09,426 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig eth0 | grep 'inet addr:' | awk -F' ' '{print $2}' | awk -F':' '{print $2}'
[D 2022-07-20 15:02:09,473 rivieraCommunication:0301] [:(] Executing ADB shell(device): ifconfig wlan0 | grep 'inet addr:' | awk -F' ' '{print $2}' | awk -F':' '{print $2}'
[I 2022-07-20 15:02:09,520 conftest:0285] [:(] apClient is trying to connect with this ip 10.26.138.46
[I 2022-07-20 15:02:09,520 apTestClient:0074] [:(] Need to specify a variant in APTestConfig for each unit now; spotty, mojo, eddie, etc.
[W 2022-07-20 15:02:09,863 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:09,863 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:10,285 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:10,285 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:10,863 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:10,863 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:11,301 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:11,301 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:11,879 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:11,879 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:12,316 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:12,316 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:12,894 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:12,894 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:13,316 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:13,316 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:13,894 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:13,894 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:14,331 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:14,331 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:14,909 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:14,909 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:15,347 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:15,347 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:15,924 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:15,924 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:16,362 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:16,362 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:16,924 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:16,924 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:17,377 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:17,377 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:17,940 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:17,940 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:18,393 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:18,393 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:18,955 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:18,955 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:19,408 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:19,408 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:19,908 apTestClient:0112] [:(] Opening 10.26.138.46
[I 2022-07-20 15:02:19,908 apTestClient:0116] [:(] 10.26.138.46
[I 2022-07-20 15:02:19,939 apServerListener:0647] [:(] PROTOCOL DESCRIPOR RECEIVED
[I 2022-07-20 15:02:19,939 apServerListener:0137] [:(] Wait for Client event PROTOCOL_DESCRIPTOR
[I 2022-07-20 15:02:19,939 apEventHandler:0041] [:(] Got Event: PROTOCOL_DESCRIPTOR
[I 2022-07-20 15:02:19,939 apServerListener:0479] [:(] SERVER IS SUSPENDED
[I 2022-07-20 15:02:19,939 conftest:0262] [:(] Invoking HTTPServer fixture
[I 2022-07-20 15:02:19,939 apEventHandler:0041] [:(] Got Event: SUSPENDED
[I 2022-07-20 15:02:19,939 apEventHandler:0041] [:(] Got Event: LATENCYUPDATE
[I 2022-07-20 15:02:19,939 apServerListener:0644] [:(] LATENCYUPDATE MESSAGE
[I 2022-07-20 15:02:19,939 apServerListener:0502] [:(] CAPABILITIES MESSAGE
[I 220720 15:02:19.939 SampleMusicServer:67] [:(] started sample music server...
[I 2022-07-20 15:02:19,939 conftest:0273] [:(] Main music url http://10.26.138.25:26762/pulse_every_1_second_1_min.wav
[I 2022-07-20 15:02:19,939 apEventHandler:0041] [:(] Got Event: CAPABILITIES
[I 2022-07-20 15:02:19,955 conftest:0683] [:(] -----------------------
[I 2022-07-20 15:02:19,955 apServerListener:0464] [:(] ZONE_STATEMSG RECVD: status: DISCONNECTED
change_reason: COMMANDED

[I 2022-07-20 15:02:19,955 conftest:0684] [:(] TEST SETUP PASSED
[I 2022-07-20 15:02:19,955 apEventHandler:0041] [:(] Got Event: I_AM_NOT_A_SLAVE
[I 2022-07-20 15:02:19,955 conftest:0685] [:(] Test: test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav-48000]
[I 2022-07-20 15:02:19,955 conftest:0686] [:(] DateTime: 2022-07-20 15:02:19.955056
[I 2022-07-20 15:02:19,955 conftest:0687] [:(] ------------------------
[I 2022-07-20 15:02:19,955 test_a2dp_play:0139] [:(] TEST: test_a2dp_audio_play
[I 2022-07-20 15:02:19,955 test_a2dp_play:0047] [:(] initialize_a2dp_capture_test
[I 2022-07-20 15:02:19,955 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:02:19,955 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:02:19,955 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:02:19,955 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:02:19.955 SpitfireMessaging:361] Sending request with transaction id 10 (0xa)
[W 2022-07-20 15:02:19,970 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:19,970 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[D Jul-20 15:02:19.970 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:19,970 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 7
[I 2022-07-20 15:02:20,017 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 7
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:02:20,017 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:02:20,017 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[I 2022-07-20 15:02:20,017 sink_group:0030] [:(] clear_audio_stream_status: BOTH
[I 2022-07-20 15:02:20,017 SpitfireComponentMessaging:0323] [:(] Right: clear_event(aud): event_id: 0
[I 2022-07-20 15:02:20,017 SpitfireComponentMessaging:0323] [:(] Right: clear_event(aud): event_id: 1
[I 2022-07-20 15:02:20,017 SpitfireComponentMessaging:0323] [:(] Left: clear_event(aud): event_id: 0
[I 2022-07-20 15:02:20,017 SpitfireComponentMessaging:0323] [:(] Left: clear_event(aud): event_id: 1
[I 2022-07-20 15:02:20,017 test_a2dp_play:0118] [:(] set_codec_connect_and_check
[I 2022-07-20 15:02:20,017 helper_functions:0866] [:(] set_sbc_codec_connect_and_check
[I 2022-07-20 15:02:20,017 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:02:20,017 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:02:20,017 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:02:20,017 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:02:20.017 SpitfireMessaging:361] Sending request with transaction id 11 (0xb)
[D Jul-20 15:02:20.033 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:20,033 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 8
[I 2022-07-20 15:02:20,080 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 8
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:02:20,080 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:02:20,080 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[I 2022-07-20 15:02:20,080 helper_functions:0833] [:(] set_a2dp_sbc_codecParams
[D 2022-07-20 15:02:20,080 rivieraCommunication:0301] [:(] Executing ADB shell(device): /opt/Bose/bin/frontdoorutil -c POST /bluetooth/source/updateCodecParams '{ "codec_type":"SBC", "sbc_codec":{"channel":"JOINT_STEREO", "sample_freq":"SAMPLE_RATE_48000"}}'
[I 2022-07-20 15:02:20,158 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:02:20,158 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:02:20,158 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:02:20,173 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:02:20.173 SpitfireMessaging:361] Sending request with transaction id 12 (0xc)
[D Jul-20 15:02:20.173 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:20,173 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 9
[I 2022-07-20 15:02:20,236 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 9
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:02:20,236 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:02:20,236 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[I 2022-07-20 15:02:20,251 helper_functions:0143] [:(] connect_and_wait_for_profile_connected: attempt 1 of 3
[I 2022-07-20 15:02:20,251 helper_functions:0097] [:(] pair_list_clear_and_pair_source
[I 2022-07-20 15:02:20,251 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:02:20,251 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:02:20,251 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:02:20,251 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:02:20.251 SpitfireMessaging:361] Sending request with transaction id 13 (0xd)
[D Jul-20 15:02:20.267 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:20,267 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 10
[I 2022-07-20 15:02:20,314 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 10
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:02:20,314 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:02:20,314 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[D 2022-07-20 15:02:20,329 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:20,329 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:20,329 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/sink/macAddr
[D 2022-07-20 15:02:20,329 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:02:20,329 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/sink/macAddr', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 12}}
[D 2022-07-20 15:02:20,329 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:02:20,329 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 12,
        "resource": "/bluetooth/sink/macAddr",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:20,329 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 12,
        "resource": "/bluetooth/sink/macAddr",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:20,329 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/sink/macAddr
[D 2022-07-20 15:02:20,376 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "mac": "28:11:a5:a5:cb:a8"
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 12,
        "resource": "/bluetooth/sink/macAddr",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:20,376 sink_group:0057] [:(] check_pair_status: RIGHT
[I 2022-07-20 15:02:20,376 bt_spitfire_helper:0206] [:(] Right: check_pair_status
[W 2022-07-20 15:02:20,408 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:20,408 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:20,579 bt_spitfire_helper:0278] [:(] Right: cor.bt list response: ' 3) 28:11:a5:a5:cb:a8  ............ H    896c 6cbd 3f95 c3cf 82d6 b5bc b2a7 67ca BA8BCC HS 300'
[I 2022-07-20 15:02:20,579 helper_functions:0160] [:(] check_source_pair_status
[D 2022-07-20 15:02:20,579 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:20,579 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:20,579 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/source/list
[D 2022-07-20 15:02:20,579 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:02:20,579 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/list', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 13}}
[D 2022-07-20 15:02:20,579 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:02:20,579 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 13,
        "resource": "/bluetooth/source/list",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:20,579 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 13,
        "resource": "/bluetooth/source/list",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:20,579 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/list
[D 2022-07-20 15:02:20,611 bt_notification:0392] [:(] _source_list_cb
[D 2022-07-20 15:02:20,673 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls",
                "productId": 0,
                "variantId": 0
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 13,
        "resource": "/bluetooth/source/list",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:20,673 sink_group:0030] [:(] enter_pair_state: RIGHT
[I 2022-07-20 15:02:20,673 bt_spitfire_helper:0237] [:(] Right: enter_pair_state
[I 2022-07-20 15:02:20,673 SpitfireBluetoothMessage:0032] [:(] Right: send_bt_pairing_command for mode: 1
[I 2022-07-20 15:02:20,673 SpitfireComponentMessaging:0293] [:(] Right: send_command(bt): cmd_id= 0
[D Jul-20 15:02:20.689 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:20,689 helper_functions:0124] [:(] connect_and_check
[I 2022-07-20 15:02:20,689 bt_notification:0307] [:(] register_for_source_profile_states
[D 2022-07-20 15:02:20,689 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:20,689 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:20,689 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/source/list
[D 2022-07-20 15:02:20,704 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:02:20,704 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/list', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 14}}
[D 2022-07-20 15:02:20,704 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:02:20,704 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 14,
        "resource": "/bluetooth/source/list",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:20,704 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 14,
        "resource": "/bluetooth/source/list",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:20,704 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/list
[D 2022-07-20 15:02:20,736 bt_notification:0392] [:(] _source_list_cb
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls",
                "productId": 0,
                "variantId": 0
            }
        ]
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 14,
        "resource": "/bluetooth/source/list",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:20,751 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(bt): context= 0
[I 2022-07-20 15:02:20,751 helper_functions:0131] [:(]  sink device mac address ['78:2b:64:7c:45:be']
[I 2022-07-20 15:02:20,751 SpitfireComponentMessaging:0082] [:(] Right: Got 'bt' Event: 0
 --- Data ---
mode: enter
reason: other

[D 2022-07-20 15:02:20,751 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0376] [:(] Sending POST to /bluetooth/source/connect
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0379] [:(] Enveloping data: {
    "mac": "78:2b:64:7c:45:be"
}
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/connect', 'version': 1, 'token': '12345', 'method': 'POST', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 15}}
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{
    "mac": "78:2b:64:7c:45:be"
}
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 15,
        "resource": "/bluetooth/source/connect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 15,
        "resource": "/bluetooth/source/connect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:20,751 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/connect
[D 2022-07-20 15:02:20,970 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:21,001 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_CONNECTING expected = DEVICE_CONNECTED
[W 2022-07-20 15:02:21,017 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[D 2022-07-20 15:02:21,032 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "deviceClass": "000000",
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "status": "DEVICE_CONNECTING",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:21,220 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:21,282 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:02:21,314 bt_notification:0401] [:(] _source_app_status_cb received = APP_CONNECTING expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:21,329 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "devices": [],
        "status": "APP_CONNECTING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:21,392 FrontDoorAPI:0397] [:(] The returned response is:
{
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "RESPONSE",
        "reqID": 15,
        "resource": "/bluetooth/source/connect",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:21,392 bt_notification:0255] [:(] wait_for_source_connection_status_changed_notification
[W 2022-07-20 15:02:21,423 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:21,423 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:21,439 bt_notification:0586] [:(] _acl_status_cb
[I 2022-07-20 15:02:21,439 bt_notification:0587] [:(] {'header': {'device': 'b13a8018-0ead-1570-8a2a-b936b18bd42c', 'resource': '/bluetooth/aclConnectionStatus', 'method': 'NOTIFY', 'version': 1.0}, 'body': {'is_connected': True, 'mac': '78:2b:64:7c:45:be', 'reason': 0, 'type': 'CLASSIC'}}
[D 2022-07-20 15:02:21,439 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "is_connected": true,
        "mac": "78:2b:64:7c:45:be",
        "reason": 0,
        "type": "CLASSIC"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/aclConnectionStatus",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:21,736 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(bt): context= 0
[I 2022-07-20 15:02:21,736 SpitfireComponentMessaging:0082] [:(] Right: Got 'bt' Event: 0
 --- Data ---
mode: exit
reason: handset_connected

[I 2022-07-20 15:02:21,813 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:21,813 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 31
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D 2022-07-20 15:02:21,954 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:02:21,954 bt_notification:0401] [:(] _source_app_status_cb received = APP_CONNECTED expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:21,954 bt_notification:0406] [:(] Threading event sourceAppStatusNotifEvent set successfully
[D 2022-07-20 15:02:21,954 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "activeDevice": "78:2b:64:7c:45:be",
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ],
        "status": "APP_CONNECTED"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:21,954 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:21,954 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_A2DP",
        "status": "PROFILE_CONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_UNINITIALIZED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_UNINITIALIZED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_UNINITIALIZED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:21,986 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:21,986 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_CONNECTED expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:21,986 bt_notification:0356] [:(] Threading event sourceConnectionStatusNotifEvent set successfully
[I 2022-07-20 15:02:21,986 bt_notification:0288] [:(] wait_for_source_status_notification
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "delay": 1500,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "serialNumber": "",
        "status": "DEVICE_CONNECTED",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/source/connect
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/connect', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 16}}
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:02:22,001 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 16,
        "resource": "/bluetooth/source/connect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 16,
        "resource": "/bluetooth/source/connect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:22,001 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/connect
[D 2022-07-20 15:02:22,032 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 16,
        "resource": "/bluetooth/source/connect",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:22,032 bt_notification:0201] [:(] wait_for_source_profiles_status_notification
[D 2022-07-20 15:02:22,142 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:22,142 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_HFAG",
        "status": "PROFILE_CONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_UNINITIALIZED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_UNINITIALIZED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:22,157 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:22,157 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_CONNECTED expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:22,157 bt_notification:0356] [:(] Threading event sourceConnectionStatusNotifEvent set successfully
[D 2022-07-20 15:02:22,157 bt_notification:0359] [:(] _source_connection_status_cb received = True expected = True
[D 2022-07-20 15:02:22,157 bt_notification:0362] [:(] Threading event sourceSPPNotifEvent set successfully
[D 2022-07-20 15:02:22,157 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "bmapConnected": true,
        "delay": 1500,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "serialNumber": "",
        "status": "DEVICE_CONNECTED",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:22,157 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:22,157 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_SPP",
        "status": "PROFILE_CONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_UNINITIALIZED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_CONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:22,298 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:22,298 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:22,438 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:22,438 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:22,517 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:22,517 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
stream_type: VOICE
max_val: 15
current_val: 10
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:22,532 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(tel): context= 0
[I 2022-07-20 15:02:22,532 SpitfireComponentMessaging:0082] [:(] Right: Got 'tel' Event: 0
 --- Data ---
status: TEL_PROFILE_CONNECTED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D 2022-07-20 15:02:22,611 bt_notification:0549] [:(] _source_hfag_battery_level_cb received = NOTIFY
[D 2022-07-20 15:02:22,611 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "percentage": 0
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/hfagBatteryLevelStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:22,626 bt_notification:0476] [:(] _source_hfag_speaker_volume_cb received = NOTIFY
[D 2022-07-20 15:02:22,626 bt_notification:0480] [:(] Threading event sourceHfagSpeakerVolumesNotifEvent set successfully
[D 2022-07-20 15:02:22,626 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "type": "SPEAKER",
        "volume": 67
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/hfagVolume/speaker",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:22,642 bt_notification:0469] [:(] _source_hfag_mic_volume_cb received = NOTIFY
[D 2022-07-20 15:02:22,642 bt_notification:0473] [:(] Threading event sourceHfagMicVolumeNotifEvent set successfully
[D 2022-07-20 15:02:22,642 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "type": "MIC",
        "volume": 100
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/hfagVolume/mic",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:23,313 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:23,313 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:23,438 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:23,438 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:24,329 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:24,329 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:24,454 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:24,454 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[E 2022-07-20 15:02:24,969 apServerListener:0659] [:(] GetHeadder : Socket timout
[I 2022-07-20 15:02:25,157 apEventHandler:0041] [:(] Got Event: LATENCYUPDATE
[I 2022-07-20 15:02:25,157 apServerListener:0644] [:(] LATENCYUPDATE MESSAGE
[W 2022-07-20 15:02:25,344 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:25,344 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:25,469 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:25,469 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:25,532 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:25,532 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_AVRCP",
        "status": "PROFILE_CONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_CONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:25,532 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:25,532 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:25,532 bt_notification:0331] [:(] _source_volume_cb received = NOTIFY
[D 2022-07-20 15:02:25,547 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/sink/macAddr
[D 2022-07-20 15:02:25,547 bt_notification:0335] [:(] Threading event sourceVolumeNotifEvent set successfully
[D 2022-07-20 15:02:25,547 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:02:25,547 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "volume": 100
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/volume",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:25,547 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/sink/macAddr', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 17}}
[D 2022-07-20 15:02:25,547 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:02:25,547 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 17,
        "resource": "/bluetooth/sink/macAddr",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:25,547 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 17,
        "resource": "/bluetooth/sink/macAddr",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:25,547 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/sink/macAddr
[D 2022-07-20 15:02:25,578 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "mac": "28:11:a5:a5:cb:a8"
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 17,
        "resource": "/bluetooth/sink/macAddr",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:25,578 sink_group:0030] [:(] wait_for_sink_profiles_connection_state: RIGHT
[I 2022-07-20 15:02:25,578 bt_spitfire_helper:0249] [:(] Right: wait_for_sink_profiles_connection_state: ['PROFILE_ID_AVRCP', 'PROFILE_ID_A2DP', 'PROFILE_ID_HFAG'] PROFILE_CONNECTED 28:11:a5:a5:cb:a8 30
[I 2022-07-20 15:02:25,766 bt_spitfire_helper:0278] [:(] Right: cor.bt list response: '*3) 28:11:a5:a5:cb:a8  h2........s. H    896c 6cbd 3f95 c3cf 82d6 b5bc b2a7 67ca BA8BCC HS 300'
[I 2022-07-20 15:02:25,766 bt_spitfire_helper:0370] [:(] Right: Current Profiles h2........s. H
[I 2022-07-20 15:02:25,766 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : v (PROFILE_ID_AVRCP)
[I 2022-07-20 15:02:25,766 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : 2 (PROFILE_ID_A2DP)
[I 2022-07-20 15:02:25,766 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : h (PROFILE_ID_HFP)
[I 2022-07-20 15:02:26,000 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(mpl): context= 0
[I 2022-07-20 15:02:26,000 SpitfireComponentMessaging:0082] [:(] Right: Got 'mpl' Event: 0
 --- Data ---
status: PROFILE_CONNECTED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:26,016 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:26,016 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 31
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:26,094 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(mpl): context= 1
[I 2022-07-20 15:02:26,094 SpitfireComponentMessaging:0082] [:(] Right: Got 'mpl' Event: 1
 --- Data ---
status: MEDIA_STOPPED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:26,172 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(mpl): context= 2
[I 2022-07-20 15:02:26,172 SpitfireComponentMessaging:0082] [:(] Right: Got 'mpl' Event: 2
 --- Data ---
isTrackChanged: true
attributes {
  id: MPL_NOWPLAYING_TITLE
  len: 1
  attribute: " "
}

[W 2022-07-20 15:02:26,344 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:26,344 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:26,469 bt_spitfire_helper:0278] [:(] Right: cor.bt list response: '*3) 28:11:a5:a5:cb:a8  h2v.......s. H    896c 6cbd 3f95 c3cf 82d6 b5bc b2a7 67ca BA8BCC HS 300'
[I 2022-07-20 15:02:26,469 bt_spitfire_helper:0370] [:(] Right: Current Profiles h2v.......s. H
[I 2022-07-20 15:02:26,469 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : v (PROFILE_ID_AVRCP)
[I 2022-07-20 15:02:26,469 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : 2 (PROFILE_ID_A2DP)
[I 2022-07-20 15:02:26,469 bt_spitfire_helper:0373] [:(] Right: Checking state for Profile : h (PROFILE_ID_HFP)
[I 2022-07-20 15:02:26,469 helper_functions:0208] [:(] set_volume
[D 2022-07-20 15:02:26,469 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:26,484 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[W 2022-07-20 15:02:26,484 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[D 2022-07-20 15:02:26,484 FrontDoorAPI:0376] [:(] Sending POST to /bluetooth/source/volume
[I 2022-07-20 15:02:26,484 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:26,484 FrontDoorAPI:0379] [:(] Enveloping data: {
    "volume": 90
}
[D 2022-07-20 15:02:26,484 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/volume', 'version': 1, 'token': '12345', 'method': 'POST', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 18}}
[D 2022-07-20 15:02:26,484 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{
    "volume": 90
}
[D 2022-07-20 15:02:26,484 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "volume": 90
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 18,
        "resource": "/bluetooth/source/volume",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:26,484 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "volume": 90
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 18,
        "resource": "/bluetooth/source/volume",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:26,484 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/volume
[D 2022-07-20 15:02:26,516 bt_notification:0331] [:(] _source_volume_cb received = POST
[I 2022-07-20 15:02:26,562 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[D 2022-07-20 15:02:26,562 bt_notification:0331] [:(] _source_volume_cb received = NOTIFY
[I 2022-07-20 15:02:26,562 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 28
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D 2022-07-20 15:02:26,562 FrontDoorAPI:0397] [:(] The returned response is:
{
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "RESPONSE",
        "reqID": 18,
        "resource": "/bluetooth/source/volume",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:26,562 bt_notification:0335] [:(] Threading event sourceVolumeNotifEvent set successfully
[I 2022-07-20 15:02:26,562 helper_functions:0851] [:(] get_a2dp_CodecParams
[D 2022-07-20 15:02:26,562 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "volume": 90
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/volume",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:26,562 rivieraCommunication:0301] [:(] Executing ADB shell(device): /opt/Bose/bin/frontdoorutil -c POST /bluetooth/source/codecParams '{"mac":"78:2b:64:7c:45:be"}'
[I 2022-07-20 15:02:26,641 sink_group:0086] [:(] send_audio_prepare_output_request: BOTH
[I 2022-07-20 15:02:26,641 SpitfireAudioMessage:0687] [:(] Right: send_audio_prepare_output_request for prepare: True chain: True hwPower: True, unlock: True
[I 2022-07-20 15:02:26,641 SpitfireComponentMessaging:0210] [:(] Right: send_request(aud): message_id= 35
[I 2022-07-20 15:02:26,656 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 1
[D Jul-20 15:02:26.656 SpitfireMessaging:361] Sending request with transaction id 14 (0xe)
[I 2022-07-20 15:02:26,656 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 28
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D Jul-20 15:02:26.656 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:26,656 SpitfireAudioMessage:0687] [:(] Left: send_audio_prepare_output_request for prepare: True chain: True hwPower: True, unlock: True
[I 2022-07-20 15:02:26,656 SpitfireComponentMessaging:0210] [:(] Left: send_request(aud): message_id= 35
[D Jul-20 15:02:26.656 SpitfireMessaging:361] Sending request with transaction id 3 (0x3)
[D Jul-20 15:02:26.672 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:26,672 sink_group:0086] [:(] check_audio_prepare_output_event: BOTH
[I 2022-07-20 15:02:26,672 SpitfireAudioMessage:0723] [:(] Right: check_audio_prepare_output_event: prepared: True, chain: True, hwPower: True, unlock: True, timeout_s: 10
[I 2022-07-20 15:02:26,672 SpitfireAudioMessage:0742] [:(] Right: Got expected Audio output event: prepared True, chain True, hwPower True, unlock True : prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:02:26,672 SpitfireAudioMessage:0723] [:(] Left: check_audio_prepare_output_event: prepared: True, chain: True, hwPower: True, unlock: True, timeout_s: 10
[I 2022-07-20 15:02:26,672 SpitfireAudioMessage:0742] [:(] Left: Got expected Audio output event: prepared True, chain True, hwPower True, unlock True : prepared: true
state {
  chain: true
  hwPower: true
  unlock: true
}

[I 2022-07-20 15:02:26,672 helper_functions:0242] [:(] Main music url http://10.26.138.25:26762/testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav
[I 2022-07-20 15:02:26,672 test_a2dp_play:0153] [:(] stream_url = http://10.26.138.25:26762/testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav
[I 2022-07-20 15:02:26,672 helper_functions:0226] [:(] play_primary_stream url=http://10.26.138.25:26762/testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav
[I 2022-07-20 15:02:26,672 apTestClient:0229] [:(]  SETURL
[I 2022-07-20 15:02:26,672 apTestClient:0287] [:(] url: "http://10.26.138.25:26762/testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav"
url_is_realtime: false
connection_timeout_in_ms: 20000
buffering_timeout_in_ms: 180000
source_dryup_timeout_ms: 30000
source_retry_delay_ms: 5000
source_retry_count: 5
dist_range: MULTIROOM
url_uuid: "b422a5540b0d4f9ba053f2bfe89f13a4"

[I 2022-07-20 15:02:26,672 apTestClient:0315] [:(] TRANSPORT CONTROL PLAY, url_id: 0  url_uuid b422a5540b0d4f9ba053f2bfe89f13a4
[I 2022-07-20 15:02:26,672 helper_functions:0229] [:(] primary stream urlUuid=b422a5540b0d4f9ba053f2bfe89f13a4
[I 2022-07-20 15:02:26,687 apServerListener:0221] [:(] Wait for Stream Event PLAYING id b422a5540b0d4f9ba053f2bfe89f13a4
[I 2022-07-20 15:02:26,687 apServerListener:0572] [:(] VolumeControl 10
[I 2022-07-20 15:02:26,687 apEventHandler:0041] [:(] Got Event: VOLUMECONTROL
[I 2022-07-20 15:02:26,703 SpitfireComponentMessaging:0199] [:(] Right: Response(aud): message_id: 35, request_id: 5
 --- payload---
success: true


[I 2022-07-20 15:02:26,719 SpitfireComponentMessaging:0199] [:(] Left: Response(aud): message_id: 35, request_id: 3
 --- payload---
success: true


[I 2022-07-20 15:02:26,735 apServerListener:0249] [:(] SETURL Response 15:02:26.735011 url: True, url_id: http://10.26.138.25:26762/testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav, url_uuid: 2
[I 2022-07-20 15:02:26,735 apEventHandler:0041] [:(] Got Event: SETURL
[I 2022-07-20 15:02:26,735 apEventHandler:0041] [:(] Got Event: CONNECTING
[I 2022-07-20 15:02:26,735 apServerListener:0395] [:(] different prefetch_type received : streamId : b422a5540b0d4f9ba053f2bfe89f13a4 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:26,735 apEventHandler:0041] [:(] Got Event: PREFETCH_TYPE
[I 2022-07-20 15:02:26,735 apServerListener:0398] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' PREFETCH_TYPE ', '0']
[I 2022-07-20 15:02:26,735 apServerListener:0409] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' FRONTED']
[I 2022-07-20 15:02:26,735 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:26,735 apServerListener:0415] [:(] 15:02:26.735011 SERVERSTATE streamId: b422a5540b0d4f9ba053f2bfe89f13a4 Update CONNECTING stoppedReason: NA milliseconds: 0 byte_offset 0 total_length 0 prefetchReady: False prefetchType: 0
[I 2022-07-20 15:02:26,735 apServerListener:0614] [:(] Stream State received from client 10.26.138.46
[I 2022-07-20 15:02:26,735 apServerListener:0629] [:(] Stream state - isSilent: True
[I 2022-07-20 15:02:26,735 apEventHandler:0041] [:(] Got Event: STREAMSTATE
[I 2022-07-20 15:02:26,735 apServerListener:0288] [:(] TRANSPORT PLAY url_id: 0 url_uuid: b422a5540b0d4f9ba053f2bfe89f13a4
[I 2022-07-20 15:02:26,735 apEventHandler:0041] [:(] Got Event: TRANSPORTCONTROL
10.26.138.46 - - [20/Jul/2022 15:02:26] "GET /testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav HTTP/1.1" 200 -
[I 220720 15:02:26.750 SampleMusicServer:39] [:(] FILESIZE 1920044
[I 2022-07-20 15:02:26,781 apServerListener:0482] [:(] SERVER IS UNSUSPENDED
[I 2022-07-20 15:02:26,781 apEventHandler:0041] [:(] Got Event: UNSUSPENDED
[I 2022-07-20 15:02:26,781 apEventHandler:0041] [:(] Got Event: BUFFERING
[I 2022-07-20 15:02:26,797 apServerListener:0400] [:(] same prefetch_type received : streamId : b422a5540b0d4f9ba053f2bfe89f13a4 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:26,797 apServerListener:0409] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' FRONTED']
[I 2022-07-20 15:02:26,797 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:26,797 apServerListener:0415] [:(] 15:02:26.781597 SERVERSTATE streamId: b422a5540b0d4f9ba053f2bfe89f13a4 Update BUFFERING stoppedReason: NA milliseconds: 0 byte_offset 0 total_length 0 prefetchReady: False prefetchType: 0
[I 2022-07-20 15:02:26,797 apServerListener:0614] [:(] Stream State received from client 10.26.138.46
[I 2022-07-20 15:02:26,797 apServerListener:0629] [:(] Stream state - isSilent: True
[I 2022-07-20 15:02:26,797 apEventHandler:0041] [:(] Got Event: STREAMSTATE
[I 2022-07-20 15:02:26,875 apEventHandler:0041] [:(] Got Event: PLAYING
[I 2022-07-20 15:02:26,875 apServerListener:0400] [:(] same prefetch_type received : streamId : b422a5540b0d4f9ba053f2bfe89f13a4 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:26,875 helper_functions:0231] [:(] play_stream is playing now
[I 2022-07-20 15:02:26,890 apServerListener:0409] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' FRONTED']
[I 2022-07-20 15:02:26,890 sink_group:0086] [:(] check_audio_stream_status: BOTH
[I 2022-07-20 15:02:26,890 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:26,890 SpitfireAudioMessage:0245] [:(] Right: check_audio_stream_status: Event: 0, Expected Stream type: 0, State: 3, DuckedState: 1, expected_reason: None, stream_id: None
[I 2022-07-20 15:02:26,890 apServerListener:0415] [:(] 15:02:26.875319 SERVERSTATE streamId: b422a5540b0d4f9ba053f2bfe89f13a4 Update PLAYING stoppedReason: NA milliseconds: 1 byte_offset 2140 total_length 0 prefetchReady: False prefetchType: 0
[I 2022-07-20 15:02:26,890 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 0
[I 2022-07-20 15:02:26,890 apServerListener:0614] [:(] Stream State received from client 10.26.138.46
[I 2022-07-20 15:02:26,890 apServerListener:0629] [:(] Stream state - isSilent: False
[I 2022-07-20 15:02:26,890 apEventHandler:0041] [:(] Got Event: STREAMSTATE
[I 2022-07-20 15:02:26,937 apServerListener:0400] [:(] same prefetch_type received : streamId : b422a5540b0d4f9ba053f2bfe89f13a4 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:26,937 apServerListener:0409] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' FRONTED']
[I 2022-07-20 15:02:26,937 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:26,937 apServerListener:0415] [:(] 15:02:26.937810 SERVERSTATE streamId: b422a5540b0d4f9ba053f2bfe89f13a4 Update PLAYING stoppedReason: NA milliseconds: 13 byte_offset 4236 total_length 0 prefetchReady: False prefetchType: 0
[W 2022-07-20 15:02:27,359 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:27,359 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:27,500 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:27,500 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:27,750 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:02:27,750 bt_notification:0401] [:(] _source_app_status_cb received = APP_PLAYING expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:27,750 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "activeDevice": "78:2b:64:7c:45:be",
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ],
        "status": "APP_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:27,890 apServerListener:0400] [:(] same prefetch_type received : streamId : b422a5540b0d4f9ba053f2bfe89f13a4 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:27,890 apServerListener:0409] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' FRONTED']
[I 2022-07-20 15:02:27,890 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:27,890 apServerListener:0415] [:(] 15:02:27.890707 SERVERSTATE streamId: b422a5540b0d4f9ba053f2bfe89f13a4 Update PLAYING stoppedReason: NA milliseconds: 1013 byte_offset 197068 total_length 0 prefetchReady: False prefetchType: 0
[W 2022-07-20 15:02:27,906 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 0
[I 2022-07-20 15:02:27,906 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 0
[W 2022-07-20 15:02:27,906 api:0040] [:(] Right: Event 0 wait timed out, retrying in 1 seconds...
[I 2022-07-20 15:02:27,906 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 0
 --- Data ---
streamStatus {
  streamState: PLAYING
  duckedState: FRONTED
  toneArgs {
  }
}

[I 2022-07-20 15:02:27,906 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 0
[I 2022-07-20 15:02:27,906 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 0
 --- Data ---
streamStatus {
  streamState: PLAYING
  duckedState: FRONTED
  toneArgs {
  }
}

[D 2022-07-20 15:02:27,937 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:27,937 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_CONNECTED expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:27,937 bt_notification:0356] [:(] Threading event sourceConnectionStatusNotifEvent set successfully
[D 2022-07-20 15:02:27,937 bt_notification:0359] [:(] _source_connection_status_cb received = True expected = True
[D 2022-07-20 15:02:27,937 bt_notification:0362] [:(] Threading event sourceSPPNotifEvent set successfully
[D 2022-07-20 15:02:27,937 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "bmapConnected": true,
        "delay": 1500,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "serialNumber": "",
        "status": "DEVICE_CONNECTED",
        "streamState": "PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:28,375 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:28,375 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:28,515 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:28,515 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:28,890 apServerListener:0400] [:(] same prefetch_type received : streamId : b422a5540b0d4f9ba053f2bfe89f13a4 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:28,890 apServerListener:0409] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' FRONTED']
[I 2022-07-20 15:02:28,890 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:28,890 apServerListener:0415] [:(] 15:02:28.890497 SERVERSTATE streamId: b422a5540b0d4f9ba053f2bfe89f13a4 Update PLAYING stoppedReason: NA milliseconds: 2013 byte_offset 387804 total_length 0 prefetchReady: False prefetchType: 0
[I 2022-07-20 15:02:28,921 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 0
[I 2022-07-20 15:02:28,921 SpitfireAudioMessage:0268] [:(] Right: Got expected Audio stream event: stream type 0, state 3, ducked_state 1, streamStatus {
  streamState: PLAYING
  duckedState: FRONTED
  toneArgs {
  }
}

[I 2022-07-20 15:02:28,921 SpitfireAudioMessage:0245] [:(] Left: check_audio_stream_status: Event: 0, Expected Stream type: 0, State: 3, DuckedState: 1, expected_reason: None, stream_id: None
[I 2022-07-20 15:02:28,921 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 0
[I 2022-07-20 15:02:28,921 SpitfireAudioMessage:0268] [:(] Left: Got expected Audio stream event: stream type 0, state 3, ducked_state 1, streamStatus {
  streamState: PLAYING
  duckedState: FRONTED
  toneArgs {
  }
}

[I 2022-07-20 15:02:28,921 sink_group:0030] [:(] set_volume: RIGHT
[I 2022-07-20 15:02:28,937 bt_spitfire_helper:0968] [:(] Right: set_volume: volume = 100
[I 2022-07-20 15:02:28,937 bt_spitfire_helper:0939] [:(] Right: get_volume_range: stream_type 0
[I 2022-07-20 15:02:28,937 bt_spitfire_helper:0973] [:(] Right: set_volume: set_abs_vol = 31
[I 2022-07-20 15:02:28,937 SpitfireAudioMessage:0299] [:(] Right: send_abs_volume_request volume: 31 stream_type: 0
[I 2022-07-20 15:02:28,937 SpitfireComponentMessaging:0210] [:(] Right: send_request(aud): message_id= 28
[D Jul-20 15:02:28.937 SpitfireMessaging:361] Sending request with transaction id 15 (0xf)
[D Jul-20 15:02:28.952 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:28,952 SpitfireAudioMessage:0353] [:(] Right: check_abs_volume_response
[I 2022-07-20 15:02:28,952 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(aud): message_id: 28 and request_id: 6
[I 2022-07-20 15:02:29,328 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 1
[D 2022-07-20 15:02:29,328 bt_notification:0331] [:(] _source_volume_cb received = NOTIFY
[I 2022-07-20 15:02:29,328 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 1
[I 2022-07-20 15:02:29,328 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 31

[D 2022-07-20 15:02:29,328 bt_notification:0335] [:(] Threading event sourceVolumeNotifEvent set successfully
[I 2022-07-20 15:02:29,343 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 1
 --- Data ---
max_val: 31
current_val: 31

[I 2022-07-20 15:02:29,343 SpitfireComponentMessaging:0199] [:(] Right: Response(aud): message_id: 28, request_id: 6
 --- payload---
max_val: 31
current_val: 31


[D 2022-07-20 15:02:29,343 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "maxVolume": 100,
        "volume": 100
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/volume",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:29,359 sink_group:0057] [:(] check_audio_music_codec: BOTH
[I 2022-07-20 15:02:29,359 bt_spitfire_helper:0315] [:(] Right: check_audio_music_codec: SBC
[W 2022-07-20 15:02:29,375 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:29,375 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:29,405 bt_spitfire_helper:0278] [:(] Right: aud.a2dpcodec response: 'A2DP codec: SBC'
[I 2022-07-20 15:02:29,405 bt_spitfire_helper:0323] [:(] Right: Current codec SBC matches expected
[I 2022-07-20 15:02:29,405 bt_spitfire_helper:0315] [:(] Left: check_audio_music_codec: SBC
[I 2022-07-20 15:02:29,453 bt_spitfire_helper:0278] [:(] Left: aud.a2dpcodec response: 'A2DP codec: SBC'
[I 2022-07-20 15:02:29,453 bt_spitfire_helper:0323] [:(] Left: Current codec SBC matches expected
[I 2022-07-20 15:02:29,453 conftest:0697] [:(] -----------------------
[I 2022-07-20 15:02:29,453 conftest:0698] [:(] TEST PASSED
[I 2022-07-20 15:02:29,453 conftest:0699] [:(] Test: test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav-48000]
[I 2022-07-20 15:02:29,453 conftest:0700] [:(] DateTime: 2022-07-20 15:02:29.453160
[I 2022-07-20 15:02:29,453 conftest:0701] [:(] ------------------------
PASSED[I 2022-07-20 15:02:29,468 test_a2dp_play:0078] [:(] ---------------START TEARDOWN---------------------
[I 2022-07-20 15:02:29,468 apTestClient:0315] [:(] TRANSPORT CONTROL STOP, url_id: 0  url_uuid b422a5540b0d4f9ba053f2bfe89f13a4
[I 2022-07-20 15:02:29,468 apServerListener:0221] [:(] Wait for Stream Event STOPPED id b422a5540b0d4f9ba053f2bfe89f13a4
[I 2022-07-20 15:02:29,484 apServerListener:0288] [:(] TRANSPORT STOP url_id: 0 url_uuid: b422a5540b0d4f9ba053f2bfe89f13a4
[I 2022-07-20 15:02:29,484 apEventHandler:0041] [:(] Got Event: TRANSPORTCONTROL
[W 2022-07-20 15:02:29,530 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:29,530 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:29,546 apEventHandler:0041] [:(] Got Event: READY_FOR_PREFETCH
[I 2022-07-20 15:02:29,546 apServerListener:0400] [:(] same prefetch_type received : streamId : b422a5540b0d4f9ba053f2bfe89f13a4 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:29,546 apServerListener:0409] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' FRONTED']
[I 2022-07-20 15:02:29,562 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:29,562 apServerListener:0415] [:(] 15:02:29.546941 SERVERSTATE streamId: b422a5540b0d4f9ba053f2bfe89f13a4 Update PLAYING stoppedReason: NA milliseconds: 2621 byte_offset 505180 total_length 0 prefetchReady: True prefetchType: 0
[W 2022-07-20 15:02:30,390 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:30,390 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:30,468 helper_functions:0065] [:(] is_source_connected
[D 2022-07-20 15:02:30,468 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:30,468 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:30,468 FrontDoorAPI:0376] [:(] Sending GET to /bluetooth/source/status
[D 2022-07-20 15:02:30,468 FrontDoorAPI:0379] [:(] Enveloping data:
[D 2022-07-20 15:02:30,468 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/status', 'version': 1, 'token': '12345', 'method': 'GET', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 19}}
[D 2022-07-20 15:02:30,483 FrontDoorAPI:0437] [:(] The data received in JSON string is:

[D 2022-07-20 15:02:30,483 FrontDoorAPI:0452] [:(] The value of the message is: {
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 19,
        "resource": "/bluetooth/source/status",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:30,499 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "REQUEST",
        "reqID": 19,
        "resource": "/bluetooth/source/status",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:30,499 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/status
[D 2022-07-20 15:02:30,530 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:02:30,546 bt_notification:0401] [:(] _source_app_status_cb received = APP_PLAYING expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:30,546 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "activeDevice": "78:2b:64:7c:45:be",
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ],
        "status": "APP_PLAYING"
    },
    "header": {
        "device": "GUID",
        "method": "GET",
        "msgtype": "RESPONSE",
        "reqID": 19,
        "resource": "/bluetooth/source/status",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:30,546 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:30,546 sink_group:0086] [:(] get_mac: RIGHT
[I 2022-07-20 15:02:30,546 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:30,546 bt_spitfire_helper:0199] [:(] Right: get_mac
[I 2022-07-20 15:02:30,546 SpitfireBluetoothMessage:0256] [:(] Right: get_mac_based_on_role
[I 2022-07-20 15:02:30,546 SpitfireComponentMessaging:0210] [:(] Right: send_request(bt): message_id= 17
[D Jul-20 15:02:30.546 SpitfireMessaging:361] Sending request with transaction id 16 (0x10)
[D Jul-20 15:02:30.546 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:30,546 SpitfireComponentMessaging:0261] [:(] Right: wait_for_response(bt): message_id: 17 and request_id: 11
[I 2022-07-20 15:02:30,562 apEventHandler:0041] [:(] Got Event: STOPPED
[I 2022-07-20 15:02:30,562 apServerListener:0400] [:(] same prefetch_type received : streamId : b422a5540b0d4f9ba053f2bfe89f13a4 : prefetch_type : SEQUENTIAL
[I 2022-07-20 15:02:30,562 apServerListener:0409] [:(] ['Stream ', 'b422a5540b0d4f9ba053f2bfe89f13a4', ' FRONTED']
[I 2022-07-20 15:02:30,562 apEventHandler:0041] [:(] Got Event: FRONTED
[I 2022-07-20 15:02:30,562 apServerListener:0415] [:(] 15:02:30.562077 SERVERSTATE streamId: b422a5540b0d4f9ba053f2bfe89f13a4 Update STOPPED stoppedReason: Interrupted milliseconds: 2685 byte_offset 517756 total_length 0 prefetchReady: True prefetchType: 0
[I 2022-07-20 15:02:30,608 SpitfireComponentMessaging:0199] [:(] Right: Response(bt): message_id: 17, request_id: 11
 --- payload---
bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}


[I 2022-07-20 15:02:30,608 SpitfireBluetoothMessage:0268] [:(] Right: response: bluetooth_addr {
  nap: 30763
  uap: 100
  lap: 8144318
}

[I 2022-07-20 15:02:30,608 bt_spitfire_helper:0202] [:(] Right: get_mac: 78:2b:64:7c:45:be
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0376] [:(] Sending POST to /bluetooth/source/disconnect
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0379] [:(] Enveloping data: {
    "mac": "78:2b:64:7c:45:be"
}
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/bluetooth/source/disconnect', 'version': 1, 'token': '12345', 'method': 'POST', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 20}}
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{
    "mac": "78:2b:64:7c:45:be"
}
[I 2022-07-20 15:02:30,624 apServerListener:0479] [:(] SERVER IS SUSPENDED
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 20,
        "resource": "/bluetooth/source/disconnect",
        "token": "1234xxxx",
        "version": 1
    }
}
[I 2022-07-20 15:02:30,624 apEventHandler:0041] [:(] Got Event: SUSPENDED
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "mac": "78:2b:64:7c:45:be"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 20,
        "resource": "/bluetooth/source/disconnect",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:30,624 FrontDoorAPI:0392] [:(] Getting the response for: /bluetooth/source/disconnect
[D 2022-07-20 15:02:30,718 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:30,749 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_DISCONNECTING expected = DEVICE_CONNECTED
[I 2022-07-20 15:02:30,780 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(tel): context= 0
[D 2022-07-20 15:02:30,780 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "status": "DEVICE_DISCONNECTING",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:30,858 SpitfireComponentMessaging:0082] [:(] Right: Got 'tel' Event: 0
 --- Data ---
status: TEL_PROFILE_DISCONNECTED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[I 2022-07-20 15:02:30,843 apEventHandler:0041] [:(] Got Event: LATENCYUPDATE
[I 2022-07-20 15:02:30,874 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 0
[I 2022-07-20 15:02:30,968 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 0
[I 2022-07-20 15:02:31,124 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 0
 --- Data ---
streamStatus {
  streamState: COMPLETED
  duckedState: FRONTED
  reason: END_OF_TRACK
  toneArgs {
  }
}

[D 2022-07-20 15:02:30,968 bt_notification:0397] [:(] _source_app_status_cb
[I 2022-07-20 15:02:31,171 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 0
 --- Data ---
streamStatus {
  streamState: COMPLETED
  duckedState: FRONTED
  reason: END_OF_TRACK
  toneArgs {
  }
}

[I 2022-07-20 15:02:31,233 apServerListener:0644] [:(] LATENCYUPDATE MESSAGE
[D 2022-07-20 15:02:31,389 bt_notification:0401] [:(] _source_app_status_cb received = APP_DISCONNECTING expected = ['APP_CONNECTING', 'APP_CONNECTED']
[W 2022-07-20 15:02:31,421 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[D 2022-07-20 15:02:31,608 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "activeDevice": "78:2b:64:7c:45:be",
        "devices": [
            {
                "deviceClass": "240404",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                },
                "mac": "78:2b:64:7c:45:be",
                "name": "Smalls"
            }
        ],
        "status": "APP_DISCONNECTING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:31,452 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(mpl): context= 0
[W 2022-07-20 15:02:31,577 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:31,608 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:31,733 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0397] [:(] The returned response is:
{
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "RESPONSE",
        "reqID": 20,
        "resource": "/bluetooth/source/disconnect",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:31,655 SpitfireComponentMessaging:0082] [:(] Right: Got 'mpl' Event: 0
 --- Data ---
status: PROFILE_DISCONNECTED
device_id {
  nap: 10257
  uap: 165
  lap: 10865576
}

[D 2022-07-20 15:02:31,733 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0374] [:(] Getting status of the WebSocket connection
[D 2022-07-20 15:02:31,733 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_DISCONNECTING expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0375] [:(] WebSocket is Open: True
[D 2022-07-20 15:02:31,733 bt_notification:0359] [:(] _source_connection_status_cb received = False expected = True
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0376] [:(] Sending POST to /system/power/control
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "bmapConnected": false,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "status": "DEVICE_DISCONNECTING",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0379] [:(] Enveloping data: {
    "power": "OFF"
}
[D 2022-07-20 15:02:31,733 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0436] [:(] The header Json string: {'header': {'resource': '/system/power/control', 'version': 1, 'token': '12345', 'method': 'POST', 'msgtype': 'REQUEST', 'device': 'GUID', 'reqID': 21}}
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_SPP",
        "status": "PROFILE_DISCONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_DISCONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0437] [:(] The data received in JSON string is:
{
    "power": "OFF"
}
[D 2022-07-20 15:02:31,733 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0452] [:(] The value of the message is: {
    "body": {
        "power": "OFF"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 21,
        "resource": "/system/power/control",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_HFAG",
        "status": "PROFILE_DISCONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_DISCONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0382] [:(] Enveloped Message to be sent:
{
    "body": {
        "power": "OFF"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "REQUEST",
        "reqID": 21,
        "resource": "/system/power/control",
        "token": "1234xxxx",
        "version": 1
    }
}
[D 2022-07-20 15:02:31,733 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0392] [:(] Getting the response for: /system/power/control
[D 2022-07-20 15:02:31,733 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_AVRCP",
        "status": "PROFILE_DISCONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_CONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_DISCONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:31,796 bt_notification:0349] [:(] _source_connection_status_cb
[D 2022-07-20 15:02:31,858 bt_notification:0352] [:(] _source_connection_status_cb received = DEVICE_DISCONNECTED expected = DEVICE_CONNECTED
[D 2022-07-20 15:02:31,874 bt_notification:0359] [:(] _source_connection_status_cb received = False expected = True
[D 2022-07-20 15:02:31,905 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "bmapConnected": false,
        "deviceClass": "240404",
        "deviceDIDInfo": {
            "primaryRecord": true,
            "product": 16484,
            "specID": 259,
            "vendor": 158,
            "vendorIDSource": 1,
            "version": 14882
        },
        "mac": "78:2b:64:7c:45:be",
        "name": "Smalls",
        "status": "DEVICE_DISCONNECTED",
        "streamState": "NOT_PLAYING"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/connectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:31,999 bt_notification:0397] [:(] _source_app_status_cb
[D 2022-07-20 15:02:32,014 bt_notification:0401] [:(] _source_app_status_cb received = APP_NOT_CONNECTED expected = ['APP_CONNECTING', 'APP_CONNECTED']
[D 2022-07-20 15:02:32,046 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "devices": [
            {
                "deviceClass": "000000",
                "deviceDIDInfo": {
                    "primaryRecord": true,
                    "product": 16484,
                    "specID": 259,
                    "vendor": 158,
                    "vendorIDSource": 1,
                    "version": 14882
                }
            }
        ],
        "status": "APP_NOT_CONNECTED"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/status",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:32,139 bt_notification:0380] [:(] _source_profile_status_cb
[D 2022-07-20 15:02:32,155 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "mac": "78:2b:64:7c:45:be",
        "profile": "PROFILE_ID_A2DP",
        "status": "PROFILE_DISCONNECTED",
        "summary": [
            {
                "profile": "PROFILE_ID_AVRCP",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_HFAG",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_A2DP",
                "status": "PROFILE_DISCONNECTED"
            },
            {
                "profile": "PROFILE_ID_SPP",
                "status": "PROFILE_DISCONNECTED"
            }
        ]
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/source/profileStatus",
        "version": 1.0
    }
}
[I 2022-07-20 15:02:32,280 bt_notification:0586] [:(] _acl_status_cb
[I 2022-07-20 15:02:32,311 bt_notification:0587] [:(] {'header': {'device': 'b13a8018-0ead-1570-8a2a-b936b18bd42c', 'resource': '/bluetooth/aclConnectionStatus', 'method': 'NOTIFY', 'version': 1.0}, 'body': {'is_connected': False, 'mac': '78:2b:64:7c:45:be', 'reason': 22, 'type': 'CLASSIC'}}
[D 2022-07-20 15:02:32,374 FrontDoorAPI:0355] [:(] Last Notification received:{
    "body": {
        "is_connected": false,
        "mac": "78:2b:64:7c:45:be",
        "reason": 22,
        "type": "CLASSIC"
    },
    "header": {
        "device": "b13a8018-0ead-1570-8a2a-b936b18bd42c",
        "method": "NOTIFY",
        "resource": "/bluetooth/aclConnectionStatus",
        "version": 1.0
    }
}
[D 2022-07-20 15:02:32,499 FrontDoorAPI:0397] [:(] The returned response is:
{
    "body": {
        "power": "OFF"
    },
    "header": {
        "device": "GUID",
        "method": "POST",
        "msgtype": "RESPONSE",
        "reqID": 21,
        "resource": "/system/power/control",
        "status": 200,
        "token": "1234xxxx",
        "version": 1.0
    }
}
[W 2022-07-20 15:02:32,733 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[W 2022-07-20 15:02:32,733 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:32,733 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:32,733 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:33,748 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[W 2022-07-20 15:02:33,748 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:33,748 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:33,748 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:34,514 bt_notification:0572] [:(] wait_for_acl_disconnected_notification
[I 2022-07-20 15:02:34,514 sink_group:0030] [:(] clear_audio_stream_status: BOTH
[I 2022-07-20 15:02:34,514 SpitfireComponentMessaging:0323] [:(] Right: clear_event(aud): event_id: 0
[I 2022-07-20 15:02:34,514 SpitfireComponentMessaging:0323] [:(] Right: clear_event(aud): event_id: 1
[I 2022-07-20 15:02:34,514 SpitfireComponentMessaging:0323] [:(] Left: clear_event(aud): event_id: 0
[I 2022-07-20 15:02:34,514 SpitfireComponentMessaging:0323] [:(] Left: clear_event(aud): event_id: 1
[I 2022-07-20 15:02:34,514 sink_group:0030] [:(] clear_smartanr_power_status_event: BOTH
[I 2022-07-20 15:02:34,514 SpitfireComponentMessaging:0323] [:(] Right: clear_event(anr): event_id: 3
[I 2022-07-20 15:02:34,514 SpitfireComponentMessaging:0323] [:(] Left: clear_event(anr): event_id: 3
[I 2022-07-20 15:02:34,514 test_a2dp_play:0115] [:(] -----------------END TEARDOWN---------------------
[I 2022-07-20 15:02:34,514 conftest:0267] [:(] Stopping music server
[I 220720 15:02:34.514 SampleMusicServer:76] [:(] stopping sample music server...
[I 2022-07-20 15:02:34,514 conftest:0311] [:(] Closing apclient
[I 2022-07-20 15:02:34,514 apServerListener:0662] [:(] *****************HEADER READ EXCEPTION****************
[I 2022-07-20 15:02:34,514 apServerListener:0663] [:(] Error in header read
Traceback (most recent call last):
  File "C:\Users\111440\SpitfireWorkspace\testEnv\lib\site-packages\CastleAudioPathClientPyProto\APClient_py\apServerListener.py", line 657, in getHeader
    header = self.sock.recv(headerLen)
OSError: [WinError 10038] An operation was attempted on something that is not a socket
[I 2022-07-20 15:02:34,514 apServerListener:0664] [:(] ******************************************************
Closing socket
[I 2022-07-20 15:02:34,514 apFeatureFlags:0208] [:(] config not updated !!!
[I 2022-07-20 15:02:34,514 conftest:0314] [:(] apclient closed
[D 2022-07-20 15:02:34,514 conftest:0456] [:(] Teardown btNotification Fixture
[I 2022-07-20 15:02:34,514 bt_notification:0031] [:(] clean_up BTNotification
[W 2022-07-20 15:02:34,764 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[W 2022-07-20 15:02:34,764 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:34,764 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:34,764 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:35,529 FrontDoorAPI:0258] [:(] Closing WebSocket Connection
[D 2022-07-20 15:02:35,529 FrontDoorAPI:0284] [:(] WebSocket Connection Closed
[D 2022-07-20 15:02:35,529 conftest:0708] [:(] Teardown frontdoor Fixture
[W 2022-07-20 15:02:35,779 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[W 2022-07-20 15:02:35,779 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:35,779 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:35,779 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:36,545 FrontDoorAPI:0258] [:(] Closing WebSocket Connection
[D 2022-07-20 15:02:36,545 conftest:0651] [:(] Teardown adb Fixture
[I 220720 15:02:36.545 getCoreDumps:55] [:(] Executing connect method
[I 220720 15:02:36.545 getCoreDumps:59] [:(] Attempting to establish ADB connection using device id
[W 2022-07-20 15:02:36,795 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[W 2022-07-20 15:02:36,795 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:36,795 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:36,795 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[W 2022-07-20 15:02:37,810 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[W 2022-07-20 15:02:37,810 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:37,810 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:37,810 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[D 220720 15:02:38.622 rivieraCommunication:204] [:(] setCommunicationDetail
[D 220720 15:02:38.622 rivieraCommunication:206] [:(] Adb get devices
[D 220720 15:02:38.685 rivieraCommunication:211] [:(] Adb set target device
[D 220720 15:02:38.685 rivieraCommunication:214] [:(] Adb check target device is set
[D 220720 15:02:38.763 rivieraCommunication:330] [:(] Device found : ba8bcc5
[I 220720 15:02:38.763 rivieraCommunication:223] [:(] Connected to device: ba8bcc5
[I 220720 15:02:38.763 getCoreDumps:62] [:(] Connection established with ba8bcc5
[I 220720 15:02:38.778 getCoreDumps:154] [:(] Downloading /mnt/nv/BoseLog/ from ba8bcc5
[W 2022-07-20 15:02:38,825 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[W 2022-07-20 15:02:38,825 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:38,825 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:38,825 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 220720 15:02:38.825 getCoreDumps:164] [:(] No coredump found for ba8bcc5
[I 2022-07-20 15:02:38,825 sink_group:0086] [:(] send_audio_prepare_output_request: BOTH
[I 2022-07-20 15:02:38,825 SpitfireAudioMessage:0687] [:(] Right: send_audio_prepare_output_request for prepare: False chain: False hwPower: False, unlock: False
[I 2022-07-20 15:02:38,825 SpitfireComponentMessaging:0210] [:(] Right: send_request(aud): message_id= 35
[D Jul-20 15:02:38.825 SpitfireMessaging:361] Sending request with transaction id 17 (0x11)
[D Jul-20 15:02:38.841 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:38,841 SpitfireAudioMessage:0687] [:(] Left: send_audio_prepare_output_request for prepare: False chain: False hwPower: False, unlock: False
[I 2022-07-20 15:02:38,841 SpitfireComponentMessaging:0210] [:(] Left: send_request(aud): message_id= 35
[D Jul-20 15:02:38.841 SpitfireMessaging:361] Sending request with transaction id 4 (0x4)
[D Jul-20 15:02:38.857 SpitfireMessaging:434] __dispatch_message: success
[I 2022-07-20 15:02:38,857 sink_group:0086] [:(] check_audio_prepare_output_event: BOTH
[I 2022-07-20 15:02:38,857 SpitfireAudioMessage:0723] [:(] Right: check_audio_prepare_output_event: prepared: False, chain: False, hwPower: False, unlock: False, timeout_s: 10
[W 2022-07-20 15:02:38,857 api:0040] [:(] Right: Current Audio event prepared state True is not as expected False, retrying in 1 seconds...
[I 2022-07-20 15:02:38,888 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 3
[I 2022-07-20 15:02:38,888 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 3
 --- Data ---
state {
  chain: true
  hwPower: true
}

[I 2022-07-20 15:02:38,888 SpitfireAudioMessage:0054] [:(] Right: _monitor_audio_prepare_output_event: response: state {
  chain: true
  hwPower: true
}

[I 2022-07-20 15:02:38,888 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:38,904 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 3
[I 2022-07-20 15:02:38,904 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 3
 --- Data ---
state {
  chain: true
  hwPower: true
}

[I 2022-07-20 15:02:38,904 SpitfireAudioMessage:0054] [:(] Left: _monitor_audio_prepare_output_event: response: state {
  chain: true
  hwPower: true
}

[I 2022-07-20 15:02:38,904 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:38,919 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 3
[I 2022-07-20 15:02:38,919 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 3
 --- Data ---
state {
  hwPower: true
}

[I 2022-07-20 15:02:38,919 SpitfireAudioMessage:0054] [:(] Right: _monitor_audio_prepare_output_event: response: state {
  hwPower: true
}

[I 2022-07-20 15:02:38,919 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:38,935 SpitfireComponentMessaging:0199] [:(] Right: Response(aud): message_id: 35, request_id: 7
 --- payload---
success: true


[I 2022-07-20 15:02:38,935 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 3
[I 2022-07-20 15:02:38,935 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 3
 --- Data ---
state {
  hwPower: true
}

[I 2022-07-20 15:02:38,935 SpitfireComponentMessaging:0199] [:(] Left: Response(aud): message_id: 35, request_id: 4
 --- payload---
success: true


[I 2022-07-20 15:02:38,935 SpitfireAudioMessage:0054] [:(] Left: _monitor_audio_prepare_output_event: response: state {
  hwPower: true
}

[I 2022-07-20 15:02:38,935 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:38,951 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(aud): context= 3
[I 2022-07-20 15:02:38,951 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(aud): context= 3
[I 2022-07-20 15:02:38,951 SpitfireComponentMessaging:0082] [:(] Right: Got 'aud' Event: 3
 --- Data ---
state {
}

[I 2022-07-20 15:02:38,951 SpitfireComponentMessaging:0082] [:(] Left: Got 'aud' Event: 3
 --- Data ---
state {
}

[I 2022-07-20 15:02:38,951 SpitfireAudioMessage:0054] [:(] Right: _monitor_audio_prepare_output_event: response: state {
}

[I 2022-07-20 15:02:38,951 SpitfireAudioMessage:0054] [:(] Left: _monitor_audio_prepare_output_event: response: state {
}

[I 2022-07-20 15:02:38,951 SpitfireComponentMessaging:0340] [:(] Right: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:38,951 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:38,966 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(anr): context= 3
[I 2022-07-20 15:02:38,966 SpitfireComponentMessaging:0082] [:(] Right: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_POWERING_OFF

[I 2022-07-20 15:02:38,981 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(anr): context= 3
[I 2022-07-20 15:02:38,981 SpitfireComponentMessaging:0082] [:(] Left: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_POWERING_OFF

[I 2022-07-20 15:02:39,247 SpitfireComponentMessaging:0238] [:(] Right: _event_callback_function(anr): context= 3
[I 2022-07-20 15:02:39,247 SpitfireComponentMessaging:0082] [:(] Right: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_OFF

[I 2022-07-20 15:02:39,263 SpitfireComponentMessaging:0238] [:(] Left: _event_callback_function(anr): context= 3
[I 2022-07-20 15:02:39,263 SpitfireComponentMessaging:0082] [:(] Left: Got 'anr' Event: 3
 --- Data ---
status: SMARTANR_POWER_STATUS_OFF

[I 2022-07-20 15:02:39,872 SpitfireAudioMessage:0742] [:(] Right: Got expected Audio output event: prepared False, chain False, hwPower False, unlock False : state {
}

[I 2022-07-20 15:02:39,872 SpitfireAudioMessage:0723] [:(] Left: check_audio_prepare_output_event: prepared: False, chain: False, hwPower: False, unlock: False, timeout_s: 10
[I 2022-07-20 15:02:39,872 SpitfireAudioMessage:0742] [:(] Left: Got expected Audio output event: prepared False, chain False, hwPower False, unlock False : state {
}

[D 2022-07-20 15:02:39,872 conftest:0363] [:(] Teardown sink Fixture
[I 2022-07-20 15:02:39,872 bt_spitfire_group_helper:0056] [:(] clean_up BTSpitfireGroupHelper
[I 2022-07-20 15:02:39,887 bt_spitfire_helper:0190] [:(] Right: clean_up BTSpitfireHelper
[I 2022-07-20 15:02:39,887 SpitfireAudioMessage:0045] [:(] Right: stop_audio_prepare_thread
[W 2022-07-20 15:02:39,966 SpitfireComponentMessaging:0100] [:(] Right: Queue is empty for 'aud' event_id: 3
[W 2022-07-20 15:02:39,966 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:39,966 SpitfireComponentMessaging:0355] [:(] Right: clean_up SpitfireAudioMessage
[I 2022-07-20 15:02:39,966 SpitfireComponentMessaging:0340] [:(] Left: wait_for_event(aud): event_id: 3
[I 2022-07-20 15:02:39,966 SpitfireComponentMessaging:0355] [:(] Right: clean_up SpitfireMediaPlayerMessage
[I 2022-07-20 15:02:39,966 SpitfireComponentMessaging:0355] [:(] Right: clean_up SpitfireTelephonyMessage
[I 2022-07-20 15:02:39,966 bt_spitfire_helper:0260] [:(] Right: clear_all_events
[I 2022-07-20 15:02:39,966 bt_spitfire_helper:0190] [:(] Left: clean_up BTSpitfireHelper
[I 2022-07-20 15:02:39,966 SpitfireAudioMessage:0045] [:(] Left: stop_audio_prepare_thread
[W 2022-07-20 15:02:40,981 SpitfireComponentMessaging:0100] [:(] Left: Queue is empty for 'aud' event_id: 3
[I 2022-07-20 15:02:40,981 SpitfireComponentMessaging:0355] [:(] Left: clean_up SpitfireAudioMessage
[I 2022-07-20 15:02:40,981 SpitfireComponentMessaging:0355] [:(] Left: clean_up SpitfireMediaPlayerMessage
[I 2022-07-20 15:02:40,981 SpitfireComponentMessaging:0355] [:(] Left: clean_up SpitfireTelephonyMessage
[I 2022-07-20 15:02:40,997 bt_spitfire_helper:0260] [:(] Left: clear_all_events
[D 2022-07-20 15:02:40,997 conftest:0427] [:(] Teardown polycom Fixture
_del_ BTSpitfireGroupHelper
_del_ BTSpitfireHelper
_del_ BTSpitfireHelper
[I 2022-07-20 15:02:41,012 apTestClient:0143] [:(] ServerListener is None
[I 2022-07-20 15:02:41,059 conftest:1048] [:(] Cleanup started at the end of test...
[I 2022-07-20 15:02:41,075 conftest:1042] [:(] ./LOGS/2022-07-20-15-01-20\POLYCOMM_2022-07-20-15-01-20.txt removed successfully


-------------------------------- generated xml file: C:\Users\111440\.conan\data\SpitfireAudioAutomation\1.55.0+g5ad8c80\BoseCorp\master\package\e9bb71937fb4875c30d10d7fea5cf87319876349\Tests\report.xml ---------------------------------
---------------------------- generated html file: file://C:\Users\111440\.conan\data\SpitfireAudioAutomation\1.55.0+g5ad8c80\BoseCorp\master\package\e9bb71937fb4875c30d10d7fea5cf87319876349\Tests\report.html ----------------------------
[I 2022-07-20 15:02:41,075 conftest:0718] [:(] =================== TEST RESULTS ====================
[I 2022-07-20 15:02:41,075 conftest:0729] [:(]  Passed: 2
[I 2022-07-20 15:02:41,075 conftest:0731] [:(]    test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_44.1k_2bPCM_500Hz_1000Hz_10s_stereo.wav-44100]
[I 2022-07-20 15:02:41,075 conftest:0731] [:(]    test_a2dp_play.py::TestA2DP_play::test_a2dp_audio_play[False-src_dev1_Smalls__captureChannels_-testfile_48k_2bPCM_500Hz_1000Hz_10s_stereo.wav-48000]
[I 2022-07-20 15:02:41,075 conftest:0740] [:(]  Failed: 0
[I 2022-07-20 15:02:41,075 conftest:0747] [:(]  Errors: 0
[I 2022-07-20 15:02:41,075 conftest:0754] [:(]  Skipped: 0
[I 2022-07-20 15:02:41,075 conftest:0757] [:(] =========== Passed 2, Failed 0, Error 0, Skipped 0 in 72.47s =============
[I 2022-07-20 15:02:41,122 conftest:1042] [:(] ./LOGS/2022-07-20-15-01-20\logs_2022-07-20-15-01-20.txt removed successfully
[I Jul-20 15:02:41.122 report_plugin:52]
[I Jul-20 15:02:41.137 report_plugin:53] ========================Test execution Summary=========================
[I Jul-20 15:02:41.137 report_plugin:54] Total Test:30. Passed:2, Failed:0, Skipped:0, Error: 0
[I Jul-20 15:02:41.137 report_plugin:64] =======================================================================
========================================================================================= 2 passed, 28 deselected, 2 warnings in 72.53s (0:01:12) ==========================================================================================
__del__ BTNotification
